<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>SSH - 小惡魔 - AppleBOY</title><meta name=author content="Appleboy"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"小惡魔 - AppleBOY","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/blog.wu-boy.com"}</script><meta property="og:title" content="SSH"><meta property="og:image" content="https://lh3.googleusercontent.com/jsocHCR9A9yEfDVUTrU0m42_aHhTEVDGW5p5PsQSx7GSlkt3gLjohfXH3S7P7p982332ruU_e-EtW0LwmiuZjvN65VIcyME-zE35C6EM0IV1nqY6KoNw3dwW2djjid3F-T5YgnJothA=w1920-h1080"><meta property="og:url" content="https://blog.wu-boy.com/tags/ssh/"><meta property="og:type" content="website"><meta property="og:site_name" content="小惡魔 - AppleBOY"><meta name=twitter:title content="SSH"><meta name=twitter:image content="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080"><meta name=twitter:card content="summary"><meta name=twitter:site content="@appleboy"><meta name=twitter:creator content="@appleboy"><link href=https://i.imgur.com/PpOg8Dz.jpg rel=icon type=image/x-icon><meta name=generator content="Hugo 0.107.0"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css><link rel=stylesheet href=https://blog.wu-boy.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://blog.wu-boy.com/css/syntax.css><link rel=stylesheet href=https://blog.wu-boy.com/css/codeblock.css><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/tags/ssh/feed.xml title="小惡魔 - AppleBOY"><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/tags/ssh/feed.xml title="小惡魔 - AppleBOY"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-5766319-6","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title="Youtube 頻道" href=http://bit.ly/youtube-boy><i class="fab fa-youtube"></i> Youtube 頻道</a></li><li class=navlinks-container><a class=navlinks-parent><i class="fas fa-video"></i> 線上課程</a><div class=navlinks-children><a href=/golang-online-course/>Go 語言基礎實戰</a>
<a href=/docker-course/>Docker 容器開發實戰</a>
<a href=/drone-devops/>一天學會 DevOps 自動化流程</a></div></li><li><a title=歷年文章 href=/archives/><i class="fas fa-sitemap fa-lg"></i> 歷年文章</a></li><li><a href=#modalSearch data-toggle=modal data-target=#modalSearch style=outline:none><span class="hidden-sm hidden-md hidden-lg">Search</span> <span id=searchGlyph class="glyphicon glyphicon-search"></span></a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="小惡魔 - AppleBOY" href=https://blog.wu-boy.com><img class=avatar-img src="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080" alt="小惡魔 - AppleBOY"></a></div></div></div></nav><div id=modalSearch class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&#215;</button><h4 class=modal-title>Search 小惡魔 - AppleBOY</h4></div><div class=modal-body><gcse:search></gcse:search></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><div class=tags-heading><h1>SSH</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-md-10 col-md-offset-1"><div class=posts-list><article class=post-preview><a href=https://blog.wu-boy.com/2016/12/create-account-and-ssh-permission-on-mac/><h2 class=post-title>在 Mac 建立新帳號，並且開通 ssh 權限</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 30, 2016
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;165&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a href="https://i1.wp.com/live.staticflickr.com/397/31822815762_fea6b2c9f4_c.jpg?ssl=1"><img src="https://i1.wp.com/live.staticflickr.com/397/31822815762_fea6b2c9f4_c.jpg?w=840&ssl=1" alt data-recalc-dims=1></a></p><p>為什麼我會需要在 <a href=http://www.apple.com/tw/mac/>Mac</a> 建立新帳號呢，原因就是最近用 <a href=https://golang.org/>Golang</a> 寫了 <a href=https://github.com/appleboy/drone-scp>SCP 工具</a>，此工具支援 Password 或 SSH Public Key 登入，我又不想拿個人帳號寫在 Testing 檔案內，所以才會想到在 Mac 建立一個帳號好了，本篇就是教大家如何在 Mac 建立新帳號，並且開通 SSH 權限。</p><a href=https://blog.wu-boy.com/2016/12/create-account-and-ssh-permission-on-mac/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/golang/>golang</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/openssh/>OpenSSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/scp/>SCP</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2016/10/ssh-agent-forwarding-proxycommand-tutorial/><h2 class=post-title>SSH agent forwarding 教學</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on October 5, 2016
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;196&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><strong>2016.11.13 Update: SSH Agent Forwarding 有安全性問題，請用 <code>ProxyCommand</code> 取代，請參考 <a href=https://heipei.github.io/2015/02/26/SSH-Agent-Forwarding-considered-harmful/>SSH Agent Forwarding considered harmful</a></strong> <a data-flickr-embed=true href=https://www.flickr.com/photos/appleboy/30008040142/in/dateposted-public/ title="Screen Shot 2016-10-05 at 9.26.13 AM"><img src="https://i0.wp.com/c7.staticflickr.com/6/5219/30008040142_9d50881bba_z.jpg?resize=640%2C371&ssl=1" alt="Screen Shot 2016-10-05 at 9.26.13 AM" data-recalc-dims=1></a></p><p><a href=https://developer.github.com/guides/using-ssh-agent-forwarding/>SSH agent forwarding</a> 可以讓開發者將 Local 端的 SSH Key Pair 帶到另外一台機器進行傳送，也就是說你不用將 SSH Key 複製到遠端 Server 再進行跳板動作，原本在 AWS 維護多台 EC2 主機，都會固定有一台跳板機，大家都把自己需要登入遠端機器的 SSH Key 複製到跳板機，這做法其實沒有很安全，又需要多下一個指令進行跳板。</p><blockquote><p>個人電腦 -&mdash;> EC2 跳板機 -&mdash;> EC2 Server</p></blockquote><p>大家都會把 Key Pair 存放到跳板機，安全性堪憂，只要這台主機被 Hack，或者是內部員工登入，拿別人的 Key Pair 登入其它主機，不就可以搞破壞？所以此篇教學主要教大家如何設定 SSH agent forwarding，讓憑證只存放在自己電腦，而不需上傳到 <code>EC2 跳板機</code>。這樣跳板機就真的只是跳板機，不需要存放任何憑證資料，每小時設定清空 Ubuntu User 家目錄，避免內部員工放個人資料或憑證，提升主機安全性。</p><a href=https://blog.wu-boy.com/2016/10/ssh-agent-forwarding-proxycommand-tutorial/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/aws/>AWS</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/devops/>devops</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2016/01/openssh-security-cve-2016-0777-and-cve-2016-0778/><h2 class=post-title>OpenSSH 安全性漏洞 CVE-2016-0777 and CVE-2016-0778</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on January 15, 2016
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;94&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a data-flickr-embed=true href=https://www.flickr.com/photos/appleboy/23758702793/in/dateposted-public/ title=openssh><img src="https://i0.wp.com/farm2.staticflickr.com/1616/23758702793_abebfb7167_o.gif?resize=578%2C191&ssl=1" alt=openssh data-recalc-dims=1></a></p><p><a href=http://www.openssh.com/>OpenSSH</a> 今日公佈 Client Bug 漏洞 <a href="http://undeadly.org/cgi?action=article&sid=20160114142733">CVE-2016-0777 and CVE-2016-0778</a>，發生原因是 SSH Clinet 跟 Server 溝通時，新功能 <code>roaming</code> 造成傳輸過程被惡意程式破解，影響的 OpenSSH 版本為 5.4 - 7.1. 大家快看看自己是否為這版本區間。此問題會發生在 SSH Client 而不是 Server 端，所以 Linux <a href=https://www.freebsd.org/>FreeBSD</a> 和 <a href=https://zh.wikipedia.org/zh-tw/Mac_OS>MacOS</a> 都需要升級 OpenSSH，如果你是在 Windows 用 Putty 則不受影響。</p><a href=https://blog.wu-boy.com/2016/01/openssh-security-cve-2016-0777-and-cve-2016-0778/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/mac/>Mac</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/macos/>MacOS</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/openssh/>OpenSSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ubuntu/>Ubuntu</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2015/03/ruby-deploy-with-capistrano-ssh-connection-closed/><h2 class=post-title>Ruby Deploy With Capistrano 碰到 SSH Connection Closed</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 18, 2015
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;127&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><div style="margin:0 auto;text-align:center"><a href=https://www.flickr.com/photos/appleboy/13256445484/ title="CapistranoLogo by appleboy46, on Flickr"><img src="https://i2.wp.com/farm4.staticflickr.com/3756/13256445484_d0ca222f48.jpg?resize=500%2C125&ssl=1" alt=CapistranoLogo data-recalc-dims=1></a></div><p>在 <a href=https://www.ruby-lang.org/en/>Ruby</a> 開發環境最常用的 Deploy 工具就是 <a href=https://github.com/capistrano/capistrano>Capistrano</a>，讓開發者可以快速部署程式碼，在部署進行中，由於大量的 js 及 css 需要處理，所以花最長的時間就是 <code>assets:precompile</code>，執行 <code>cap deploy</code> 就會發現卡在底下錯誤訊息</p><blockquote><p>** [whenever:update_crontab] exception while rolling back: Net::SSH::Disconnect, connection closed by remote host *** [deploy:update_code] rolling back * executing &ldquo;rm -rf /home/deploy/nami/releases/20150317135422; true&rdquo; servers: [&ldquo;xxxxx.tw&rdquo;] ** [deploy:update_code] exception while rolling back: Net::SSH::Disconnect, connection closed by remote host</p></blockquote><a href=https://blog.wu-boy.com/2015/03/ruby-deploy-with-capistrano-ssh-connection-closed/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/capistrano/>capistrano</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ruby/>Ruby</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/12/linux-geany-sshfs-flag/><h2 class=post-title>Geany 編輯器搭配 sshfs 參數注意事項</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 24, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;57&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><div style="margin:0 auto;text-align:center"><a href=https://www.flickr.com/photos/appleboy/6562683991/ title="geany_vectorized_free by appleboy46, on Flickr"><img src="https://i2.wp.com/farm8.staticflickr.com/7155/6562683991_065975d0dd_m.jpg?resize=240%2C191&ssl=1" alt=geany_vectorized_free data-recalc-dims=1></a></div><p><a href=http://www.geany.org/ target=_blank>Geany</a> 是一套我覺得在 Linux 作業系統底下蠻簡易及輕量的程式編輯器，之前撰寫一篇 <a href=http://blog.wu-boy.com/2011/07/linux-geany-fuse/ target=_blank>Linux 程式開發編輯器 Geany + Fuse 遠端掛載</a> 簡易介紹如何使用 <a href=http://fuse.sourceforge.net/ target=_blank>Fuse</a>，這次發現一個小問題，就是掛載要儲存檔案時候出現底下錯誤訊息</p><blockquote><p>Error renaming temporary file: Operation not permitted. The file on disk may now be truncated! 此錯誤訊息發生在用 Fuse 掛載遠端系統所造成，原先掛載指令如下</p></blockquote><pre class="brush: bash; title: ; notranslate" title>sshfs appleboy@xxxx.com.tw:/home/appleboy /home/git/CN 
-p 22 -o reconnect,sshfs_sync -o uid=1000,gid=1000</pre>我們只需要另外加上<p><span style=color:green><strong>workaround=rename</strong></span> flag 及可以解決此問題</p><pre class="brush: bash; title: ; notranslate" title>sshfs appleboy@www.cn.ee.ccu.edu.tw:/home/appleboy /home/git/CN 
-p 22 -o reconnect,sshfs_sync -o uid=1000,gid=1000 
-o workaround=rename</pre>測試環境為 Ubuntu 10.10.<p>.</p></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/geany/>Geany</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/sshfs/>sshfs</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ubuntu/>Ubuntu</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/07/linux-geany-fuse/><h2 class=post-title>Linux 程式開發編輯器 Geany + Fuse 遠端掛載</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on July 21, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;102&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>自己買的筆電灌上了 Ubuntu 作業系統，Linux 系統好處多多，指令自己也熟悉，想架什麼站都可以，但是最主要還是要找一套程式開發編輯器，網路上看了大部份文章，我決定用 Geany 這套免費的編輯器，在 Windows XP 底下我則是使用 PSPad 搭配內建的 FTP 功能遠端編輯寫程式，但是 Geany 並沒有支援 FTP 功能，可以詳細看到官方網站 Q&A，官方建議搭配 Fuse 或 LUFS，這樣並不只是 Geany 可以使用，其他 Application 也可以任意使用了。 在介紹 Fuse 之前可以先參考過去寫的一篇教學: [SSHFS] 好用的 SSH Filesystem fusefs-sshfs in FreeBSD or Linux，裡面分享了 FreeBSD 跟 Linux 底下的 tarball 安裝方式，當然現階段 Ubuntu 安裝就很容易了，透過 Apt 管理的方式安裝:
$ apt-cache search sshfs
sshfs - filesystem client based on SSH File Transfer Protocol
sshfs-dbg - filesystem client based on SSH File Transfer Protocol (with debbuging symbols)
sbackup-plugins-fuse - Simple Backup Suite FUSE plugins
$ apt-get install sshfs 安裝完成，透過底下指令把遠端資料夾 mount 過來吧。 $ mkdir /home/appleboy/tmp
$ sshfs -p 22 appleboy@XXX.
<a href=https://blog.wu-boy.com/2011/07/linux-geany-fuse/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/fuse/>Fuse</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/geany/>Geany</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/sshfs/>sshfs</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/03/freebsd-denyhosts-%E8%A8%AD%E5%AE%9A%E5%9C%A8-hosts-allow-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85/><h2 class=post-title>[FreeBSD] DenyHosts 設定在 hosts.allow 注意事項</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 11, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;139&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>DenyHosts 是一套用 Python 跟 shell script 寫出來的 open source base on Linux or FreeBSD (/var/log/secure on Redhat, /var/log/auth.log on Mandrake, FreeBSD, etc&mldr;)，用來阻擋 SSH Server 被攻擊，之前寫一篇 FreeBSD 安裝設定教學，有一點沒有注意到，就是打開 /etc/hosts.allow，注意要把 ALL : ALL : allow 放到最後一行，跟 iptables 設定原理是一樣的，會從第一條規則開始比對，如果比對成功，下面的 rule 就會略過比對了，參考英文說明：
Start by allowing everything (this prevents the rest of the file from working, so remove it when you need protection). The rules here work on a &ldquo;First match wins&rdquo; basis. /etc/hosts.deny 已經被 FreeBSD 棄用，所以必須把 allow 跟 deny 的 rule 都寫到 hosts.
<a href=https://blog.wu-boy.com/2010/03/freebsd-denyhosts-%E8%A8%AD%E5%AE%9A%E5%9C%A8-hosts-allow-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/denyhost/>DenyHost</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2008/12/freebsd%E5%88%A9%E7%94%A8-denyhosts-%E8%BB%9F%E9%AB%94%E6%93%8B%E6%8E%89%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3-ssh-%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85/><h2 class=post-title>[FreeBSD]利用 DenyHosts 軟體擋掉暴力破解 ssh 的使用者</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 26, 2008
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;310&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>不管是架設好 Linux 跟 <a href=http://www.freebsd.org/>FreeBSD</a> 通常都會有國外的 hacker 來 try 機器的 SSH 帳號密碼，我想這是很正常的，網路上也提供很多方法來分析 Log 檔，<a href=http://www.freebsd.org/>FreeBSD</a>：/var/log/auth.log，我可以分析檔案，然後再利用 firewall like ipfw or pf 的方式來達到，或者是利用寫到 /etc/hosts.deny 來達到 Block 的功能，網路上有很多工具可以用，例如 <a href=http://denyhosts.sourceforge.net/>DenyHosts</a>，<a href=http://sshguard.sourceforge.net/>sshguard</a> 或者是 <a href=http://anp.ath.cx/sshit/>sshit</a>，可以參考我之前寫的一篇<a href=http://blog.wu-boy.com/2006/11/04/31/>利用 sshit 來達到阻擋 ssh 使用者</a>，然而今天來介紹一下 DenyHosts 再 FreeBSD 底下如何設定，還蠻方便的。 首先利用 ports 安裝，<a href=http://denyhosts.sourceforge.net/>DenyHosts</a> 是利用 <a href=http://www.python.org/>python</a> 的程式語言寫出來的：</p><pre class="brush: bash; title: ; notranslate" title>Port:   denyhosts-2.6_2
Path:   /usr/ports/security/denyhosts
Info:   Script to thwart ssh attacks
Maint:  janos.mohacsi@bsd.hu
B-deps: python25-2.5.2_3
R-deps: python25-2.5.2_3
WWW:    http://denyhosts.sourceforge.net/

/* 利用 ports 安裝 */
cd /usr/ports/security/denyhosts; make install clean
</pre><a href=https://blog.wu-boy.com/2008/12/freebsd%E5%88%A9%E7%94%A8-denyhosts-%E8%BB%9F%E9%AB%94%E6%93%8B%E6%8E%89%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3-ssh-%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/denyhost/>DenyHost</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2008/04/linux-freebsd-%E5%A5%BD%E7%94%A8%E7%9A%84-ssh-filesystem-fusefs-sshfs-in-freebsd-or-linux/><h2 class=post-title>[SSHFS] 好用的 SSH Filesystem fusefs-sshfs in FreeBSD or Linux</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on April 15, 2008
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;268&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>今天在 <a href=http://www.ptt.cc>ptt</a> <a href=http://www.linux.org/>Linux</a> 連線版文章看到有人問說，如何傳一檔案到其他的 linux 機器，有人推了一個軟體，我覺得相當不錯，就拿來玩看看了，這軟體就是 <a href=http://fuse.sourceforge.net/sshfs.html>sshfs</a> 這是一套可以直接掛載遠端機器目錄的軟體，走 ssh 協定，剛剛安裝了一下，發覺還蠻好用的，我在 <a href=http://www.linux.org/>Linux</a> 跟 <a href=http://www.freebsd.org/>FreeBSD</a> 上面都安裝好了，來紀錄一下步驟。 首先是安裝步驟 For FreeBSD，直接利用 ports 安裝即可：</p><pre class="brush: bash; title: ; notranslate" title>#
# ports 安裝
#
# Port:   fusefs-sshfs-1.8
# Path:   /usr/ports/sysutils/fusefs-sshfs
# Info:   Mount remote directories over ssh
# Maint:  amistry@am-productions.biz
# pkg-config-0.22_1
# WWW:    http://sourceforge.net/projects/fuse/

cd /usr/ports/sysutils/fusefs-sshfs; make install clean
</pre><a href=https://blog.wu-boy.com/2008/04/linux-freebsd-%E5%A5%BD%E7%94%A8%E7%9A%84-ssh-filesystem-fusefs-sshfs-in-freebsd-or-linux/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/fusefs/>fusefs</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/sshfs/>sshfs</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2008/03/%E7%AD%86%E8%A8%98-ssh-tunnel-%E9%81%8B%E7%94%A8%E5%9C%A8-linux-and-windows/><h2 class=post-title>[筆記] ssh Tunnel 運用在 Linux and Windows FireFox</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 19, 2008
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;126&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>今天在看 <a href=http://blog.gslin.org/>gslin</a> 部落格的一篇文章：<a href=http://blog.gslin.org/archives/2005/08/17/43/>穿越公司的 FireWall</a>，看完之後我覺得相當不錯，可以解決我想要的 forwarding 的問題，以及繞過防火牆的機制，剛剛自己測試一下，發現還蠻好用的，其實利用這個方式還可以遠端管理很多伺服器，如：<a href=http://www.mysql.com/>Mysql</a> 伺服器…. SSH Tunnel必須建立於一個SSH連線上，它可以讓我們穿透防火牆，建立一個安全加密的傳輸。 例如：我們現在要透過 A主機去對 smtp 或者是 http 做連接的動作，那我們就必須先建立一個到A主機的SSH連線，然後在透過它建立 Tunnel 我們會使用到的putty和plink都可以在 <a href=http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html>這裡下載</a>， 不過我更喜歡<a href=http://www.csie.ntu.edu.tw/~piaip/pietty/>pietty</a>，由<a href=http://www.csie.ntu.edu.tw/~piaip/>piaip</a>長輩製作。</p><a href=https://blog.wu-boy.com/2008/03/%E7%AD%86%E8%A8%98-ssh-tunnel-%E9%81%8B%E7%94%A8%E5%9C%A8-linux-and-windows/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;</div></article></div><ul class="pager main-pager"><li class=next><a href=https://blog.wu-boy.com/tags/ssh/page/2/>Older Posts &rarr;</a></li></ul></div></div></div><footer class=post-footer><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:appleboy.tw@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/appleboy46 title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/appleboy title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/appleboy title=GitLab><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://bitbucket.org/appleboy title=Bitbucket><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/appleboy title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/appleboy title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/channel/UCLCZJ9d_I7UJP2bpXpge8KA title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/tags/ssh/feed.xml title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://blog.wu-boy.com>Appleboy</a>
&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.107.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://blog.wu-boy.com/js/main.js></script>
<script>(function(){var t,n="003841896160749976666:l9i5hqttpqi",e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx="+n,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>$(function(){$("#show-comments").on("click",function(){var e="appleboy48";(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//appleboy48.disqus.com/count.js async></script><div class=back-to-top id=back-to-top><i class="fas fa-angle-double-up"></i></div></body></html>