<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Percona on 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</title><link>https://blog.wu-boy.com/tags/percona/</link><description>Recent content in Percona on 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><managingEditor>appleboy.tw@gmail.com (Appleboy)</managingEditor><webMaster>appleboy.tw@gmail.com (Appleboy)</webMaster><lastBuildDate>Sat, 20 Jun 2015 07:31:46 +0000</lastBuildDate><atom:link href="https://blog.wu-boy.com/tags/percona/index.xml" rel="self" type="application/rss+xml"/><item><title>優化 Percona XtraDB Cluster for write hotspots</title><link>https://blog.wu-boy.com/2015/06/optimizing-percona-xtradb-cluster-for-write-hotspots/</link><pubDate>Sat, 20 Jun 2015 07:31:46 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2015/06/optimizing-percona-xtradb-cluster-for-write-hotspots/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/12023069753/" title="percona by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm4.staticflickr.com/3820/12023069753_de60d0c86d_m.jpg?resize=240%2C234&amp;#038;ssl=1" alt="percona" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>在 &lt;a href="https://www.percona.com/blog">Percona Blog&lt;/a> 上看到這篇 &lt;a href="https://www.percona.com/blog/2015/06/03/optimizing-percona-xtradb-cluster-write-hotspots/">Optimizing Percona XtraDB Cluster for write hotspots&lt;/a> 優化多重寫入 MySQL 的狀況，舉例來說，要計算 global counter 的時候，就會遇到很頻繁的寫入 (write hotspot)，目前是不能同時寫入資料到同一個 record，會造成 performance 降低，所以大家開始導入 &lt;a href="https://www.percona.com/software/percona-xtradb-cluster">Percona XtraDB Cluster&lt;/a> 來解決同時間寫入到同一個 record，大家都認為，搞了三台 Percona Server，可以將寫入的動作分散到其他兩台，就不會遇到 Lock 問題，但是實際上根本就不是這樣。&lt;/p></description></item><item><title>在 Debian 安裝 Percona Xtradb Cluster 5.5.34 注意事項</title><link>https://blog.wu-boy.com/2014/07/install-percona-xtradb-cluster-5-5-34-tips/</link><pubDate>Fri, 04 Jul 2014 02:29:40 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/07/install-percona-xtradb-cluster-5-5-34-tips/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/12023069753/" title="percona by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm4.staticflickr.com/3820/12023069753_de60d0c86d_m.jpg?resize=240%2C234&amp;#038;ssl=1" alt="percona" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>最近幫公司安裝新的三台機器，全部上 &lt;a href="https://www.debian.org/">Debian&lt;/a> 7.5 Server 版本，統一安裝 &lt;a href="http://www.percona.com/software/percona-xtradb-cluster">Percona Xtradb Cluster&lt;/a> 最新版本 5.5.37。設定完第一台 Node，並且透過底下指令 boot up 成第一台 PXC。&lt;/p>
&lt;div>
&lt;pre class="brush: bash; title: ; notranslate" title="">$ /etc/init.d/mysql bootstrap-pxc&lt;/pre>
&lt;/div>
&lt;p>後續第二台要啟動跟第一台進行 SST，寫到一半直接噴底下錯誤訊息&lt;/p>
&lt;blockquote>
&lt;p>WSREP_SST: [ERROR] Cleanup after exit with status:32 (20140702 10:57:28.004) WSREP_SST: [INFO] Removing the sst_in_progress file (20140702 10:57:28.006) 140702 10:57:28 [ERROR] WSREP: Process completed with error: wsrep_sst_xtrabackup &amp;ndash;role &amp;lsquo;joiner&amp;rsquo; &amp;ndash;address &amp;lsquo;192.168.1.101&amp;rsquo; &amp;ndash;auth &amp;lsquo;xxxxx:xxxxxx&amp;rsquo; &amp;ndash;datadir &amp;lsquo;/var/lib/mysql/&amp;rsquo; &amp;ndash;defaults-file &amp;lsquo;/etc/mysql/my.cnf&amp;rsquo; &amp;ndash;parent &amp;lsquo;16042&amp;rsquo;: 32 (Broken pipe) 140702 10:57:28 [ERROR] WSREP: Failed to read uuid:seqno from joiner script. 140702 10:57:28 [ERROR] WSREP: SST failed: 32 (Broken pipe)&lt;/p>
&lt;/blockquote></description></item><item><title>免費下載 Percona MySQL eBooks</title><link>https://blog.wu-boy.com/2014/05/free-download-percona-mysql-ebooks/</link><pubDate>Fri, 09 May 2014 02:24:05 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/05/free-download-percona-mysql-ebooks/</guid><description>玩 MySQL 的一定知道 Percona，這次 Percona MySQL 推出免費電子書，電子書內容是從 MySQLPerformanceBlog 裡面精心挑選文章收錄，文章內容也幾乎都是 MySQL 專家寫出來的，電子書內容包含了MySQL server, Percona Server, Percona XtraDB Cluster, MySQL performance, and MySQL troubleshooting，所有的電子書都是免費下載。
How to find bugs in MySQL InnoDB Full Text Search in MySQL 5.6 InnoDB Performance Optimization Percona XtraDB Cluster 5.6 Percona XtraDB Cluster 更多主題可以直接參考 MySQL eBooks</description></item><item><title>OSDC 2014 Talk: Introduction to Percona XtraDB Cluster and HAProxy</title><link>https://blog.wu-boy.com/2014/04/osdc-2014-talk-introduction-to-percona-xtradb-cluster-and-haproxy/</link><pubDate>Sat, 12 Apr 2014 03:26:19 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/04/osdc-2014-talk-introduction-to-percona-xtradb-cluster-and-haproxy/</guid><description>&lt;p>&lt;strong>2014.05.07 OSDC 影片檔出爐&lt;/strong>&lt;/p>
&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/12023069753/" title="percona by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm4.staticflickr.com/3820/12023069753_de60d0c86d_m.jpg?resize=240%2C234&amp;#038;ssl=1" alt="percona" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>很高興可以參加今年 &lt;a href="http://osdc.tw/2014/">2014 OSDC&lt;/a>，投了一篇 &lt;a href="http://osdc.tw/program/2014-day2-10.html#content">Introduction to Percona XtraDB Cluster and HAProxy&lt;/a>，主要介紹 &lt;a href="http://www.percona.com/software/percona-xtradb-cluster">Percona XtraDB Cluster&lt;/a> 這套 open source 軟體搭配前端 &lt;a href="http://haproxy.1wt.eu/">HAProxy&lt;/a>，底下是 Slides&lt;/p></description></item><item><title>Percona Cloud Tools for MySQL 介紹及安裝</title><link>https://blog.wu-boy.com/2014/03/quick-installation-for-percona-cloud-tools-for-mysql/</link><pubDate>Thu, 06 Mar 2014 07:53:05 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/03/quick-installation-for-percona-cloud-tools-for-mysql/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/12023069753/" title="percona by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm4.staticflickr.com/3820/12023069753_de60d0c86d_m.jpg?resize=240%2C234&amp;#038;ssl=1" alt="percona" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>&lt;a href="https://www.percona.com">Percona&lt;/a> 去年推出一套 &lt;a href="https://cloud.percona.com">Cloud Tools for MySQL&lt;/a>，藉由這套雲端服務可以幫忙分析 MySQL 系統內全部 Slow Query，並且計算出時間，畫出統計圖，此套系統目前還在 Beta 版，並且有些限制，只能開 3 個 organizations，每個 organizations 只能有 5 agents，最後資料只會保留 8 天，超過就會清除。這套系統後端是由 &lt;a href="http://golang.org/">GO Language&lt;/a> 完成，前端則是由 &lt;a href="http://angularjs.org/">AngularJS&lt;/a> 串起來，上個月 Percona 還在 &lt;a href="http://www.mysqlperformanceblog.com">MySQL Performance Blog&lt;/a> 徵求 &lt;a href="http://www.mysqlperformanceblog.com/2014/01/20/percona-hiring-go-back-end-engineer/">GO 的開發者&lt;/a>，可見 Percona 也看好此服務，大膽使用 Google 推的 GO Language。&lt;/p></description></item><item><title>MySQL 5.6 UUID 複製資料到 Slave Server</title><link>https://blog.wu-boy.com/2014/01/mysql-5-6-uuid-cloning-slave-server/</link><pubDate>Thu, 23 Jan 2014 03:20:08 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/01/mysql-5-6-uuid-cloning-slave-server/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/8171305355/" title="mysql_logo by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm9.staticflickr.com/8488/8171305355_7fb578fdc9.jpg?w=300&amp;#038;ssl=1" alt="mysql_logo" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>在 &lt;a href="http://www.mysqlperformanceblog.com/">MySQL Performance Blog&lt;/a> 看到這篇 &lt;a href="http://www.mysqlperformanceblog.com/2014/01/21/beware-mysql-5-6-server-uuid-cloning-slaves/">Beware of MySQL 5.6 server UUID when cloning slaves&lt;/a>，裡面提到如果是要複製資料到 Slave 機器，大部分的使用者肯定是將 &lt;code>/var/lib/mysql&lt;/code> 目錄整個 copy 到 Slave 機器上。如果是 &lt;a href="http://dev.mysql.com/tech-resources/articles/whats-new-in-mysql-5.6.html">MySQL 5.6&lt;/a> Server 目錄內會有 &lt;code>auto.cnf&lt;/code> 設定檔，這是 MySQL 5.6 新的功能叫做 &lt;a href="http://dev.mysql.com/doc/refman/5.6/en/replication-options.html#sysvar_server_uuid">server_uuid&lt;/a>，在啟動 MySQL 後，就會自動建立 &lt;code>auto.cnf&lt;/code> 檔案，此檔案就像是 &lt;code>my.cnf&lt;/code> 或 &lt;code>my.ini&lt;/code> 設定檔一樣，只是內容只有支援 &lt;code>[auto]&lt;/code> 並且只有支援 &lt;code>server_uuid&lt;/code> 這 key 值，例如&lt;/p></description></item><item><title>Percona XtraDB Server 出現 read only issue</title><link>https://blog.wu-boy.com/2014/01/percona-xtradb-server-read-only-issue/</link><pubDate>Thu, 16 Jan 2014 08:25:42 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/01/percona-xtradb-server-read-only-issue/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/8171305355/" title="mysql_logo by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm9.staticflickr.com/8488/8171305355_7fb578fdc9.jpg?w=300&amp;#038;ssl=1" alt="mysql_logo" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>最近在整理 &lt;a href="http://www.percona.com/software/percona-server">Percona XtraDB Server&lt;/a> 將 Read Write 全部拆開，寫入部份只開一台 Node，讀取機器 Replica 則是越多越好，當然如果預計 write 都不會有任何 conflict 的話，那就不用拆開，read write 都可以在同一台即可，拆開的目的要解決 &lt;code>Innodb transaction locking&lt;/code> 問題。今天遇到的是將機器讀寫都放在同一台，然後同時多台 Master 架構，結果跑在 &lt;a href="http://www.codeigniter.org.tw/">CodeIgniter&lt;/a> 上面出現底下錯誤訊息&lt;/p>
&lt;blockquote>
&lt;p>The MySQL server is running with the &amp;ndash;read-only option so it cannot execute this statement&lt;/p>
&lt;/blockquote></description></item><item><title>Sysbench 測試 Percona XtraDB Server 效能</title><link>https://blog.wu-boy.com/2014/01/sysbench-test-percona-xtradb-server-performance/</link><pubDate>Wed, 15 Jan 2014 11:00:15 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2014/01/sysbench-test-percona-xtradb-server-performance/</guid><description>&lt;div style="margin:0 auto; text-align:center">
&lt;a href="https://www.flickr.com/photos/appleboy/8171305355/" title="mysql_logo by appleboy46, on Flickr">&lt;img src="https://i1.wp.com/farm9.staticflickr.com/8488/8171305355_7fb578fdc9.jpg?w=300&amp;#038;ssl=1" alt="mysql_logo" data-recalc-dims="1" />&lt;/a>
&lt;/div>
&lt;p>今天拿 &lt;a href="https://launchpad.net/sysbench">MySQL benchmark tool - Sysbench&lt;/a> 來測試看看 &lt;a href="http://www.percona.com/software/percona-server">Percona XtraDB Server&lt;/a> + &lt;a href="http://haproxy.1wt.eu/">Haproxy&lt;/a> 效能如何，實驗主機是執行在 &lt;a href="http://www.centos.org/">CentOS&lt;/a> 6.4 版本，記憶體 128 G，在 CentOS 本身用 Yum 安裝 Sysbench 時，內建的版本為 0.4.12，單機測試 MySQL 效能不會出現任何錯誤，但是只要是透過 Haproxy，並且有兩台以上的 Server，就會噴出底下錯誤訊息:&lt;/p>
&lt;blockquote>
&lt;p>ALERT: failed to execute mysql_stmt_execute(): Err1317 Query execution was interrupted&lt;/p>
&lt;/blockquote></description></item><item><title>MySQL 用 MySQLDump 備份 InnoDB 注意事項</title><link>https://blog.wu-boy.com/2013/04/best-mysqldump-innodb-data/</link><pubDate>Fri, 05 Apr 2013 02:20:22 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2013/04/best-mysqldump-innodb-data/</guid><description>大家在備份 MySQL 資料庫時一定是使 mysqldump 指令，不管是 MyISAM 或 InnoDB 都一樣， 在處理 InnoDB 格式備份時使用 mysqldump -single-transaction，但是你會發現在大多的備份狀況都是 OK 的，只是有時候會發現有的資料表只有備份到 structure 而無備份到 Data？ 在 MySQL Performance Blog 看到這篇講解 Best kept MySQLDump Secret，此問題出在 how MySQL’s Transactions work with DDL，ALTER TABLE 會建立一個 temporary table，並且將該資料表資料複製過去，接著刪除原有資料表，最後將 temporary table 命名為原來資料表。 底下是原作者提到的原因
How does data visibility works in this case ? DDLs are not transactional and as such the running transaction will not see the contents of old table once it is dropped, transaction also will see the new table which was created after transaction was started, including table created by ALTER TABLE statement.</description></item><item><title>Galera Cluster for MySQL Multi-master Replication</title><link>https://blog.wu-boy.com/2013/03/galera-cluster-for-mysql-multi-master-replication/</link><pubDate>Sun, 31 Mar 2013 04:48:55 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2013/03/galera-cluster-for-mysql-multi-master-replication/</guid><description>&lt;div style="margin: 0 auto; text-align: center;">
&lt;a title="galera_mysql_replication by appleboy46, on Flickr" href="https://www.flickr.com/photos/appleboy/8603447002/">&lt;img alt="galera_mysql_replication" src="https://i0.wp.com/farm9.staticflickr.com/8383/8603447002_050ecd1b53.jpg?resize=500%2C247&amp;#038;ssl=1" data-recalc-dims="1" />&lt;/a>
&lt;/div> 最近公司買了幾台機架伺服器來處理 HTTP 跟 DB Load balancer，要做到 DB 的分散式架構，首先需要同步多台機器資料，也就是寫入或更動任意一台單筆資料，另外平行的機器也會同時進行更新。同步的好處可以用來做備援及分散處理連線，而要做到此功能，可子參考網路上評價不錯的
&lt;p>&lt;a href="http://www.codership.com/content/using-galera-cluster" target="_blank">Galera Cluster for MySQL&lt;/a> 方案。本篇會介紹在 &lt;a href="http://www.ubuntu.com/" target="_blank">Ubuntu&lt;/a> 或 &lt;a href="http://www.centos.org/" target="_blank">CentOS&lt;/a> 6.x final 版本如何安裝 Galera 伺服器套件及設定。要架設 Galera Cluster Server，有兩種套件選擇，一個是 &lt;a href="http://www.percona.com/software/percona-xtradb-cluster" target="_blank">Percona XtraDB Cluster&lt;/a> 另一個是 &lt;a href="https://downloads.mariadb.org/mariadb-galera/" target="_blank">MariaDB Galera Cluster&lt;/a>，這次作者會介紹後者的安裝。&lt;/p>
&lt;h3 id="galera-cluster-介紹-為什麼要選擇-galera-cluster-server它有什麼優點及功能呢mysqlgalera-是一套可以同步多台-mysqlinnodb-機器的叢集系統底下可以列出功能">Galera Cluster 介紹 為什麼要選擇 Galera Cluster Server，它有什麼優點及功能呢？MySQL/Galera 是一套可以同步多台 MySQL/InnoDB 機器的叢集系統，底下可以列出功能。&lt;/h3>
&lt;ul>
&lt;li>同步複製資料&lt;/li>
&lt;li>可讀取和寫入叢集系統內任一節點&lt;/li>
&lt;li>自動偵測節點錯誤，如果有節點當機，則叢集系統自動移除該節點&lt;/li>
&lt;li>可任意擴充節點&lt;/li>
&lt;li>採用 row level 方式來平行複製資料 從上面功能看來，我們可以平行任意擴充節點，動態增加伺服器到叢集系統，要做到上面功能，就是利用&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="http://www.codership.com/products/galera_replication" target="_blank">Galera library&lt;/a> 來做到同步資料處理，同步的詳細細節，可以參考 Galera library 連結。這邊就不再多描述了。&lt;/p></description></item><item><title>Percona XtraBackup InnoDB 備份工具</title><link>https://blog.wu-boy.com/2013/01/percona-xtrabackup-innodb/</link><pubDate>Tue, 01 Jan 2013 04:13:33 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2013/01/percona-xtrabackup-innodb/</guid><description>&lt;p>&lt;a href="http://www.percona.com/software/percona-xtrabackup/" target="_blank">Percona XtraBackup&lt;/a> 是一套 compiled C 程式，用於備份 MySQL InnoDB 資料庫，過去備份 MyISAM 或 InnoDB 都是透過 mysqldump 指令，或者是直接 copy &lt;strong>&lt;span style="color: #008000;">/var/lib/mysql&lt;/span>&lt;/strong> 目錄當作備份(這方法盡量少做，請確定 MySQL 版本一致)，XtraBackup 用於備份 InnoDB 資料部份，請注意這邊，真的只有&amp;quot;備份資料&amp;quot;，而不是全部(結構跟資料)，底下仔細介紹如何安裝:&lt;/p>
&lt;h3 id="安裝方式-大家可以選擇透過">安裝方式 大家可以選擇透過&lt;/h3>
&lt;p>&lt;a href="http://www.percona.com/doc/percona-xtrabackup/installation/yum_repo.html" target="_blank">yum&lt;/a> 或 &lt;a href="http://www.percona.com/doc/percona-xtrabackup/installation/apt_repo.html" target="_blank">apt&lt;/a> Repository 方式安裝，下面介紹 apt 方式即可。&lt;/p></description></item></channel></rss>