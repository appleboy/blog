<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DenyHost on 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</title><link>https://blog.wu-boy.com/tags/denyhost/</link><description>Recent content in DenyHost on 小惡魔 - 電腦技術 - 工作筆記 - AppleBOY</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><managingEditor>appleboy.tw@gmail.com (Appleboy)</managingEditor><webMaster>appleboy.tw@gmail.com (Appleboy)</webMaster><lastBuildDate>Thu, 11 Mar 2010 10:13:29 +0000</lastBuildDate><atom:link href="https://blog.wu-boy.com/tags/denyhost/index.xml" rel="self" type="application/rss+xml"/><item><title>[FreeBSD] DenyHosts 設定在 hosts.allow 注意事項</title><link>https://blog.wu-boy.com/2010/03/freebsd-denyhosts-%E8%A8%AD%E5%AE%9A%E5%9C%A8-hosts-allow-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85/</link><pubDate>Thu, 11 Mar 2010 10:13:29 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2010/03/freebsd-denyhosts-%E8%A8%AD%E5%AE%9A%E5%9C%A8-hosts-allow-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85/</guid><description>DenyHosts 是一套用 Python 跟 shell script 寫出來的 open source base on Linux or FreeBSD (/var/log/secure on Redhat, /var/log/auth.log on Mandrake, FreeBSD, etc&amp;hellip;)，用來阻擋 SSH Server 被攻擊，之前寫一篇 FreeBSD 安裝設定教學，有一點沒有注意到，就是打開 /etc/hosts.allow，注意要把 ALL : ALL : allow 放到最後一行，跟 iptables 設定原理是一樣的，會從第一條規則開始比對，如果比對成功，下面的 rule 就會略過比對了，參考英文說明：
Start by allowing everything (this prevents the rest of the file from working, so remove it when you need protection). The rules here work on a &amp;ldquo;First match wins&amp;rdquo; basis. /etc/hosts.</description></item><item><title>[FreeBSD]利用 DenyHosts 軟體擋掉暴力破解 ssh 的使用者</title><link>https://blog.wu-boy.com/2008/12/freebsd%E5%88%A9%E7%94%A8-denyhosts-%E8%BB%9F%E9%AB%94%E6%93%8B%E6%8E%89%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3-ssh-%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85/</link><pubDate>Fri, 26 Dec 2008 04:48:00 +0000</pubDate><author>appleboy.tw@gmail.com (Appleboy)</author><guid>https://blog.wu-boy.com/2008/12/freebsd%E5%88%A9%E7%94%A8-denyhosts-%E8%BB%9F%E9%AB%94%E6%93%8B%E6%8E%89%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3-ssh-%E7%9A%84%E4%BD%BF%E7%94%A8%E8%80%85/</guid><description>&lt;p>不管是架設好 Linux 跟 &lt;a href="http://www.freebsd.org/">FreeBSD&lt;/a> 通常都會有國外的 hacker 來 try 機器的 SSH 帳號密碼，我想這是很正常的，網路上也提供很多方法來分析 Log 檔，&lt;a href="http://www.freebsd.org/">FreeBSD&lt;/a>：/var/log/auth.log，我可以分析檔案，然後再利用 firewall like ipfw or pf 的方式來達到，或者是利用寫到 /etc/hosts.deny 來達到 Block 的功能，網路上有很多工具可以用，例如 &lt;a href="http://denyhosts.sourceforge.net/">DenyHosts&lt;/a>，&lt;a href="http://sshguard.sourceforge.net/">sshguard&lt;/a> 或者是 &lt;a href="http://anp.ath.cx/sshit/">sshit&lt;/a>，可以參考我之前寫的一篇&lt;a href="http://blog.wu-boy.com/2006/11/04/31/">利用 sshit 來達到阻擋 ssh 使用者&lt;/a>，然而今天來介紹一下 DenyHosts 再 FreeBSD 底下如何設定，還蠻方便的。 首先利用 ports 安裝，&lt;a href="http://denyhosts.sourceforge.net/">DenyHosts&lt;/a> 是利用 &lt;a href="http://www.python.org/">python&lt;/a> 的程式語言寫出來的：&lt;/p>
&lt;pre class="brush: bash; title: ; notranslate" title="">Port: denyhosts-2.6_2
Path: /usr/ports/security/denyhosts
Info: Script to thwart ssh attacks
Maint: janos.mohacsi@bsd.hu
B-deps: python25-2.5.2_3
R-deps: python25-2.5.2_3
WWW: http://denyhosts.sourceforge.net/
/* 利用 ports 安裝 */
cd /usr/ports/security/denyhosts; make install clean
&lt;/pre></description></item></channel></rss>