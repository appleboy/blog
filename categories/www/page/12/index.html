<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title>www - 小惡魔 - AppleBOY</title>
<meta name=author content="Appleboy"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"小惡魔 - AppleBOY","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/blog.wu-boy.com"}</script>
<meta property="og:title" content="www">
<meta property="og:image" content="https://lh3.googleusercontent.com/jsocHCR9A9yEfDVUTrU0m42_aHhTEVDGW5p5PsQSx7GSlkt3gLjohfXH3S7P7p982332ruU_e-EtW0LwmiuZjvN65VIcyME-zE35C6EM0IV1nqY6KoNw3dwW2djjid3F-T5YgnJothA=w1920-h1080">
<meta property="og:url" content="https://blog.wu-boy.com/categories/www/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="小惡魔 - AppleBOY">
<meta name=twitter:title content="www">
<meta name=twitter:image content="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@appleboy">
<meta name=twitter:creator content="@appleboy">
<link href=https://i.imgur.com/PpOg8Dz.jpg rel=icon type=image/x-icon>
<meta name=generator content="Hugo 0.92.2"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css>
<link rel=stylesheet href=https://blog.wu-boy.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://blog.wu-boy.com/css/syntax.css><link rel=stylesheet href=https://blog.wu-boy.com/css/codeblock.css><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/www/feed.xml title="小惡魔 - AppleBOY">
<link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/www/feed.xml title="小惡魔 - AppleBOY">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-5766319-6','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top navbar-custom">
<div class=container-fluid>
<div class=navbar-header>
<button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a>
</div>
<div class="collapse navbar-collapse" id=main-navbar>
<ul class="nav navbar-nav navbar-right">
<li>
<a title="Youtube 頻道" href=http://bit.ly/youtube-boy><i class="fab fa-youtube"></i> Youtube 頻道</a>
</li>
<li class=navlinks-container>
<a class=navlinks-parent><i class="fas fa-video"></i> 線上課程</a>
<div class=navlinks-children>
<a href=/golang-online-course/> Go 語言基礎實戰</a>
<a href=/docker-course/> Docker 容器開發實戰</a>
<a href=/drone-devops/> 一天學會 DevOps 自動化流程</a>
</div>
</li>
<li>
<a title=歷年文章 href=/archives/><i class="fas fa-sitemap fa-lg"></i> 歷年文章</a>
</li>
<li>
<a href=#modalSearch data-toggle=modal data-target=#modalSearch style=outline:none>
<span class="hidden-sm hidden-md hidden-lg">Search</span> <span id=searchGlyph class="glyphicon glyphicon-search"></span>
</a>
</li>
</ul>
</div>
<div class=avatar-container>
<div class=avatar-img-border>
<a title="小惡魔 - AppleBOY" href=https://blog.wu-boy.com>
<img class=avatar-img src="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080" alt="小惡魔 - AppleBOY">
</a>
</div>
</div>
</div>
</nav>
<div id=modalSearch class="modal fade" role=dialog>
<div class=modal-dialog>
<div class=modal-content>
<div class=modal-header>
<button type=button class=close data-dismiss=modal>&#215;</button>
<h4 class=modal-title>Search 小惡魔 - AppleBOY</h4>
</div>
<div class=modal-body>
<gcse:search></gcse:search>
</div>
<div class=modal-footer>
<button type=button class="btn btn-default" data-dismiss=modal>Close</button>
</div>
</div>
</div>
</div>
<header class=header-section>
<div class="intro-header no-img">
<div class=container>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<div class=categories-heading>
<h1>www</h1>
<hr class=small>
</div>
</div>
</div>
</div>
</div>
</header>
<div class=container role=main>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<div class=posts-list>
<article class=post-preview>
<a href=https://blog.wu-boy.com/2007/03/www-%E7%B6%B2%E7%AB%99%E5%88%86%E6%B5%81%E5%95%8F%E9%A1%8C%EF%BC%8C%E5%9C%A8ptt%E4%B8%8A%E9%9D%A2%E7%9C%8B%E5%88%B0%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/>
<h2 class=post-title>[www] 網站分流問題</h2>
</a>
<p class=post-meta>
<span class=post-meta>
<i class="fas fa-calendar"></i>&nbsp;Posted on March 11, 2007
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;146&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy
</span>
</p>
<div class=post-entry>
<p>昨天在上台大 ptt 的bbs，逛到php版，發現裏面有人提問到，如何做到分流的問題，其實這個問題很多方式可以解決，以下我擷取一篇 ptt 上面的回文</p>
<blockquote>
<p>作者: MrMarcus (請勿忘記密碼) 看板: PHP 標題: Re: [問題] 網站分流問題 時間: Sun Mar 11 00:26:04 2007 ※ 引述《timyau (我討厭Sony)》之銘言： : 我架了一個網站， : 使用了一台轉址主機、 : 兩台 Web Server 進行分流 : 另外還有一台主機當資料庫使用 : 每次使用者輸入轉址主機的位置 : 主機就會自動將使用者於內部導向兩台Web Server的其中一台 : 所以每次網站只要更新，就得同時更新兩台Web Server的網頁 : 這樣一來就有問題了 : 一但只更新其中一台Web Server， : 使用者連到網站來就會有可能看到不一樣的內容 : 因為有時候可能連到有更新的那一台，有時候會連到沒有更新的那一台 : 有嚐試過把檔案都放在第三台資料庫的 SERVER : 而PHP取得資料庫Server的內部IP(例如192.168.1.3) : 來讀取使用到的相同資源檔案 : 但是從外面要讀取圖片的時候卻發生網址上面是 http://192.168…./ : 的情況 : 這樣當然是有問題的啊 Orz : 想請問這樣的架構是否有問題？ : 還是有什麼解決方法嗎？謝謝 這問題我以前有遇到過，狀況很類似。不但每次更新要FTP兩次 到兩台伺服器去，而且在程式裡面也有這個問題，變成凡是使用者 上傳檔案的地方，程式接收到檔案後除了把檔案存在自己這台的 硬碟裡面外，還得把該檔案複製到另一台伺服器硬碟的相對應位置去， 否則被帶到另一台機器去的使用者就會找不到那個檔案。 （上面指的使用者不是維護網站的人，是來瀏覽網站的使用者） 我把這個問題提出來給客戶，因為我覺得讓兩台伺服器的檔案內容 保持同步這種工作不應該在網站程式這端來執行，應該在更底層 的地方由伺服器本身自己處理掉，網站程式這層級不需要去知道 現在到底有幾台伺服器在分散負荷。而且還要考慮到日後擴充的問題， 現在是兩台，以後變成三台，程式要改成把收到的上傳檔案複製到 另外兩台去，變成四台，五台呢？ 我那時提出的建議是，增加一套獨立的儲存設備，兩台伺服器上面 設定好把某個目錄，例如/webupload，共同mount到該儲存設備去， 程式裡面就把使用者透過程式上傳的檔案儲存到/webupload去。 然後在http server裡面指定某個目錄名稱對應到/webupload。例如 在httpd.conf裡面： Alias /upload /webupload 前面的/upload是web server上使用的目錄名稱，後面的/webupload 是檔案系統上的目錄名。換句話說，使用者在瀏覽www1.mycompany.com 的時候會看到<img src=/upload/album/user1/myimage.jpg alt> myimage.jpg實際上是 /webupload/album/user1/myimage.jpg 這個檔案，而/webupload這個目錄並不在www1本機的硬碟裡面， 是在前面提到的共用儲存設備裡面。對於另一台www2來說也是 一模一樣的狀況。 也就是說www1和www2上面都做了兩件事 1. 把/webupload這個目錄掛載到共用儲存設備上的同一個目錄去。 2. 在httpd.conf裡面加上Alias指向設定。 以上這些步驟（其實只有兩個動作）可以解決使用者透過程式上傳 的檔案的同步問題。至於網站維護人員透過ftp更新的檔案要上傳 兩邊的問題，其實也可以透過類似的方式解決，在www1, www2上面 建立一個目錄掛載到共用儲存設備上的某個目錄去，然後在兩台 的httpd.conf裡面把document_root指向到該目錄去即可。 但是那時候客戶並沒有採行我的建議:( 他們的理由是 1. www1,www2的web server都共用一個儲存設備，萬一該共用 儲存設備掛了怎辦？這樣一來雖然有兩台web server，但是 整個網站都會掛點。 2. 我們沒有預算添購這個儲存設備。 第一個問題我覺得其實不是那麼嚴重，因為該儲存設備不會只有 一顆硬碟，必定是至少兩顆做Raid 1或者三顆做Raid 5甚至以上。 透過Raid可以不用太擔心這個問題。 第二個問題，無解。所以最後還是一樣，FTP兩邊丟，程式裡面兩邊存。 ╮(╯_╰)╭ 回到原po的狀況，其實你只要把你那台資料庫server當成前面 提到的共用儲存設備就可以了。</p>
</blockquote>
<a href=https://blog.wu-boy.com/2007/03/www-%E7%B6%B2%E7%AB%99%E5%88%86%E6%B5%81%E5%95%8F%E9%A1%8C%EF%BC%8C%E5%9C%A8ptt%E4%B8%8A%E9%9D%A2%E7%9C%8B%E5%88%B0%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/ class=post-read-more>[Read More]</a>
</div>
<div class=blog-tags>
<a href=https://blog.wu-boy.com/tags/load-balancing/>Load Balancing</a>&nbsp;
</div>
</article>
<article class=post-preview>
<a href=https://blog.wu-boy.com/2006/09/fc4-%E9%99%90%E5%88%B6connection-%E9%80%A3%E7%B7%9A%E6%95%B8%E7%9B%AE%E3%80%8C%E6%9E%B6%E8%A8%ADwar3%E4%BC%BA%E6%9C%8D%E5%99%A8%E3%80%8D/>
<h2 class=post-title>[FC4] 限制connection 連線數目「架設war3伺服器」</h2>
</a>
<p class=post-meta>
<span class=post-meta>
<i class="fas fa-calendar"></i>&nbsp;Posted on September 24, 2006
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;115&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy
</span>
</p>
<div class=post-entry>
fc4作業系統 預設 有連線數目的限制 還有使用者連線的限制 不過解決方法很容易 http://www.ithome.com.tw/plog/index.php?op=ViewArticle&articleId=761&blogId=131 我查到的解決方式 我改完之後如下
core file size (blocks, -c) 0 data seg size (kbytes, -d) unlimited file size (blocks, -f) unlimited pending signals (-i) 16255 max locked memory (kbytes, -l) 32 max memory size (kbytes, -m) unlimited open files (-n) 819200 pipe size (512 bytes, -p) 8 POSIX message queues (bytes, -q) 819200 stack size (kbytes, -s) 10240 cpu time (seconds, -t) unlimited max user processes (-u) 102400 virtual memory (kbytes, -v) unlimited file locks (-x) unlimited ulimit：顯示（或設定）用戶可以使用的資源限制 ulimit -a 顯示用戶可以使用的資源限制 ulimit unlimited 不限制用戶可以使用的資源，但本設定對可打開的最大文件數（max open files） 和可同時執行的最大進程數（max user processes）無效 ulimit -n &lt;可以同時打開的檔案數> 設定用戶可以同時打開的最大檔案數（max open files） 例如：ulimit -n 8192 如果本參數設定過小，對於併發訪問量大的網站，可能會出現too many open files的錯誤 ulimit -u &lt;可以執行的最大併發進程數> 設定用戶可以同時執行的最大進程數（max user processes） 例如：ulimit -u 1024
<a href=https://blog.wu-boy.com/2006/09/fc4-%E9%99%90%E5%88%B6connection-%E9%80%A3%E7%B7%9A%E6%95%B8%E7%9B%AE%E3%80%8C%E6%9E%B6%E8%A8%ADwar3%E4%BC%BA%E6%9C%8D%E5%99%A8%E3%80%8D/ class=post-read-more>[Read More]</a>
</div>
<div class=blog-tags>
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/mrtg/>mrtg</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/snmp/>snmp</a>&nbsp;
</div>
</article>
</div>
<ul class="pager main-pager">
<li class=previous>
<a href=https://blog.wu-boy.com/categories/www/page/11/>&larr; Newer Posts</a>
</li>
</ul>
</div>
</div>
</div>
<footer class=post-footer>
<div class=container>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<ul class="list-inline text-center footer-links">
<li>
<a href=mailto:appleboy.tw@gmail.com title="Email me">
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://www.facebook.com/appleboy46 title=Facebook>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://github.com/appleboy title=GitHub>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://gitlab.com/appleboy title=GitLab>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://bitbucket.org/appleboy title=Bitbucket>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://twitter.com/appleboy title=Twitter>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://linkedin.com/in/appleboy title=LinkedIn>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://www.youtube.com/channel/UCLCZJ9d_I7UJP2bpXpge8KA title=Youtube>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=/categories/www/feed.xml title=RSS>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
</ul>
<p class="credits copyright text-muted">
<a href=https://blog.wu-boy.com>Appleboy</a>
&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a>
</p>
<p class="credits theme-by text-muted">
<a href=https://gohugo.io>Hugo v0.92.2</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>
</p>
</div>
</div>
</div>
</footer>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://blog.wu-boy.com/js/main.js></script>
<script>(function(){var c='003841896160749976666:l9i5hqttpqi',a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,a.src='https://cse.google.com/cse.js?cx='+c,b=document.getElementsByTagName('script')[0],b.parentNode.insertBefore(a,b)})()</script>
<script type=text/javascript>$(function(){$('#show-comments').on('click',function(){var a='appleboy48';(function(){var b=document.createElement('script');b.type='text/javascript',b.async=!0,b.src='//'+a+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(b)})(),$(this).hide()})})</script>
<script id=dsq-count-scr src=//appleboy48.disqus.com/count.js async></script>
<div class=back-to-top id=back-to-top>
<i class="fas fa-angle-double-up"></i>
</div>
</body>
</html>