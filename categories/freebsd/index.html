<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>FreeBSD - 小惡魔 - AppleBOY</title><meta name=author content="Appleboy"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"小惡魔 - AppleBOY","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/blog.wu-boy.com"}</script><meta property="og:title" content="FreeBSD"><meta property="og:image" content="https://lh3.googleusercontent.com/jsocHCR9A9yEfDVUTrU0m42_aHhTEVDGW5p5PsQSx7GSlkt3gLjohfXH3S7P7p982332ruU_e-EtW0LwmiuZjvN65VIcyME-zE35C6EM0IV1nqY6KoNw3dwW2djjid3F-T5YgnJothA=w1920-h1080"><meta property="og:url" content="https://blog.wu-boy.com/categories/freebsd/"><meta property="og:type" content="website"><meta property="og:site_name" content="小惡魔 - AppleBOY"><meta name=twitter:title content="FreeBSD"><meta name=twitter:image content="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080"><meta name=twitter:card content="summary"><meta name=twitter:site content="@appleboy"><meta name=twitter:creator content="@appleboy"><link href=https://i.imgur.com/PpOg8Dz.jpg rel=icon type=image/x-icon><meta name=generator content="Hugo 0.112.5"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css><link rel=stylesheet href=https://blog.wu-boy.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://blog.wu-boy.com/css/syntax.css><link rel=stylesheet href=https://blog.wu-boy.com/css/codeblock.css><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/freebsd/feed.xml title="小惡魔 - AppleBOY"><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/freebsd/feed.xml title="小惡魔 - AppleBOY"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-5766319-6","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title="Youtube 頻道" href=http://bit.ly/youtube-boy><i class="fab fa-youtube"></i> Youtube 頻道</a></li><li class=navlinks-container><a class=navlinks-parent><i class="fas fa-video"></i> 線上課程</a><div class=navlinks-children><a href=/golang-online-course/>Go 語言基礎實戰</a>
<a href=/docker-course/>Docker 容器開發實戰</a>
<a href=/drone-devops/>一天學會 DevOps 自動化流程</a></div></li><li><a title=歷年文章 href=/archives/><i class="fas fa-sitemap fa-lg"></i> 歷年文章</a></li><li><a href=#modalSearch data-toggle=modal data-target=#modalSearch style=outline:none><span class="hidden-sm hidden-md hidden-lg">Search</span> <span id=searchGlyph class="glyphicon glyphicon-search"></span></a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="小惡魔 - AppleBOY" href=https://blog.wu-boy.com><img class=avatar-img src="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080" alt="小惡魔 - AppleBOY"></a></div></div></div></nav><div id=modalSearch class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&#215;</button><h4 class=modal-title>Search 小惡魔 - AppleBOY</h4></div><div class=modal-body><gcse:search></gcse:search></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><div class=categories-heading><h1>FreeBSD</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-md-10 col-md-offset-1"><div class=posts-list><article class=post-preview><a href=https://blog.wu-boy.com/2016/01/openssh-security-cve-2016-0777-and-cve-2016-0778/><h2 class=post-title>OpenSSH 安全性漏洞 CVE-2016-0777 and CVE-2016-0778</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on January 15, 2016
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;94&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a data-flickr-embed=true href=https://www.flickr.com/photos/appleboy/23758702793/in/dateposted-public/ title=openssh><img src="https://i0.wp.com/farm2.staticflickr.com/1616/23758702793_abebfb7167_o.gif?resize=578%2C191&#038;ssl=1" alt=openssh data-recalc-dims=1></a></p><p><a href=http://www.openssh.com/>OpenSSH</a> 今日公佈 Client Bug 漏洞 <a href="http://undeadly.org/cgi?action=article&amp;sid=20160114142733">CVE-2016-0777 and CVE-2016-0778</a>，發生原因是 SSH Clinet 跟 Server 溝通時，新功能 <code>roaming</code> 造成傳輸過程被惡意程式破解，影響的 OpenSSH 版本為 5.4 - 7.1. 大家快看看自己是否為這版本區間。此問題會發生在 SSH Client 而不是 Server 端，所以 Linux <a href=https://www.freebsd.org/>FreeBSD</a> 和 <a href=https://zh.wikipedia.org/zh-tw/Mac_OS>MacOS</a> 都需要升級 OpenSSH，如果你是在 Windows 用 Putty 則不受影響。</p><a href=https://blog.wu-boy.com/2016/01/openssh-security-cve-2016-0777-and-cve-2016-0778/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/linux/>Linux</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/mac/>Mac</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/macos/>MacOS</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/openssh/>OpenSSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ssh/>SSH</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ubuntu/>Ubuntu</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2014/09/introduction-to-gnu-make-autotools-cmake/><h2 class=post-title>簡報 GNU Make, Autotools, CMake 簡介</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on September 12, 2014
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;9&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>在 <a href=http://www.slideshare.net/>SlideShare</a> 看到一份專門介紹 <a href=http://en.wikipedia.org/wiki/Make_%28software%29>Makefile</a> 的簡報，寫得非常詳細，在這裡紀錄並分享給大家，有在寫 <a href=http://en.wikipedia.org/wiki/C_%28programming_language%29>C</a>/<a href=http://en.wikipedia.org/wiki/C%2B%2B>C++</a> 的朋友們必看阿。搞系統(<a href=http://en.wikipedia.org/wiki/Linux>Linux</a> / <a href=http://en.wikipedia.org/wiki/FreeBSD>FreeBSD</a>)管理的工程師，也是必學工具之一。</p></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/cmake/>CMake</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/makefile/>Makefile</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/10/how-to-install-livereload/><h2 class=post-title>LiveReload 網頁程式設計師必備工具</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on October 27, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;334&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>如果讀者目前從事的工作跟 Web Develop 相關，相信每天在按 Ctrl + R 的次數至少在上百次吧，也許花在這上面的時間會真的很煩，有沒有想過如果每次修改 html php css s[ca]ss js 檔案後，網頁會自動幫忙 reload 呢，這樣就可以另外買個螢幕把網頁拉過去，修改好檔案，螢幕就會幫忙重新整理，大家省下這些時間就可以專心寫 Code 了啦，解決此問題非常容易，那就是裝上 <a href=https://github.com/mockko/livereload target=_blank>livereload</a> 這套 <a href=http://rubygems.org/ target=_blank>rubygem</a> 程式，底下先看看 livereload 影片:</p><a href=https://blog.wu-boy.com/2011/10/how-to-install-livereload/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/css/>CSS</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/livereload/>LiveReload</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/ruby/>Ruby</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/09/how-to-install-xcache-on-freebsd/><h2 class=post-title>安裝 XCache 加速 PHP 執行速度</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on September 20, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;349&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a href=https://www.flickr.com/photos/appleboy/6034284842/ title="php-logo by appleboy46, on Flickr"><img src="https://i2.wp.com/farm7.static.flickr.com/6186/6034284842_351ff33711_m.jpg?resize=240%2C127&#038;ssl=1" alt=php-logo data-recalc-dims=1></a></p><h2 id=前言>前言</h2><p>最近 <a href=http://www.freebsd.org target=_blank>FreeBSD</a> 系統常常會當機，加上 <a href=https://www.varnish-cache.org/ target=_blank>Varnish cache</a> + <a href=http://pecl.php.net/package/APC target=_blank>APC</a> 一直給我出包，所以這次就換了一套加速 PHP 執行的套件 <a href=http://xcache.lighttpd.net/ target=_blank>XCache</a>，這是一套由華人所開發的加速器，可以參考篇<a href=http://twpug.net/ target=_blank>台灣PHP聯盟論壇</a>所發表 <a href="http://twpug.net/modules/newbb/viewtopic.php?topic_id=1571&forum=14&post_id=8054" target=_blank>PHP 加速器 - xcache</a>，裡面可以看到<a href=http://forum.lighttpd.net/topic/880 target=_blank>這篇</a>裡面就有中文的對話，非常好玩，這次也順便把 PHP 升級到 5.3.8 版本，還有 Varnish 一次升級到 3.0.1 版本。</p><h2 id=各家-php-加速器>各家 PHP 加速器</h2><p>大家都知道目前網路上知名的 PHP 加速器 <a href=http://pecl.php.net/apc target=_blank>apc</a>, <a href=http://eaccelerator.sf.net/ target=_blank>eaccelerator</a>, <a href=http://www.php-accelerator.co.uk/ target=_blank>phpa</a>, <a href=http://turck-mmcache.sourceforge.net/index_old.html target=_blank>truck-mmcache</a>，這幾套網路上資料很多，大家都可以試著玩看看，尤其是前面兩套 APC 及 eaccelerator，phpa 目前已經不再維護了，truck-mmcache 版本好像也沒啥在更新，距離上次更新是 2009-07-17，Xcache 作者研究 truck-mmcache 跟 APC 已經很長的時間，他發現 APC 的程式碼比起 truck-mmcache 還要簡單更容易瞭解，所以大家也可以研究 APC 相關程式碼。</p><a href=https://blog.wu-boy.com/2011/09/how-to-install-xcache-on-freebsd/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/apc/>APC</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/eaccelerator/>eaccelerator</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/lighttpd/>lighttpd</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/xcache/>Xcache</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/06/%E5%A5%BD%E7%94%A8-php-debug-extension-xdebug-on-freebsd-%E5%AE%89%E8%A3%9D/><h2 class=post-title>好用 PHP debug extension Xdebug on FreeBSD 安裝</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 7, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;109&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>之前介紹 FirePHP 這套好用的 PHP Debug 工具，也寫了一篇針對 CodeIgniter 的安裝方式，請參考: [PHP] 好用 Debug PHP 工具 FirePHP for FireFox on CodeIgniter，今天要介紹一套好用的 PHP debug Extension: Xdebug 的安裝方式，作者環境是在 FreeBSD 上，Windows 安裝方式就到官方網站下載對應的 PHP Windows binaries，目前在 FreeBSD ports 上面的版本是 2.1.0，但是 Xdebug 作者已經更新到 2.1.1，自己就順手發了一個 patch 157677 給 FreeBSD 官方 ports 去 update。
FreeBSD 安裝步驟 # cd /usr/ports/devel/php-xdebug
# make install clean 設定 /usr/local/etc/php/extensions.ini 檔案後面加入
extension=xdebug.so 設定 /usr/local/etc/php/php.ini 檔案後面加入
xdebug.profiler_enable = 1
xdebug.profiler_output_dir = /tmp/profiler 重新啟動 apache /usr/local/etc/rc.d/apache22 restart 之後執行指令 php -v 會發現出現底下 warning message: PHP Warning: Xdebug MUST be loaded as a Zend extension 這時候請修改 /usr/local/etc/php/extensions.
<a href=https://blog.wu-boy.com/2011/06/%E5%A5%BD%E7%94%A8-php-debug-extension-xdebug-on-freebsd-%E5%AE%89%E8%A3%9D/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/xdebug/>Xdebug</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2011/01/freebsd-%E5%88%A9%E7%94%A8-fsck-%E6%8C%87%E4%BB%A4%E4%BF%AE%E5%BE%A9%E4%B8%8D%E6%AD%A3%E5%B8%B8%E6%96%B7%E9%9B%BB%E9%97%9C%E6%A9%9F/><h2 class=post-title>[FreeBSD] 利用 fsck 指令修復不正常斷電關機</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on January 26, 2011
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;158&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>由於人不在機器前面，所以都請學弟妹幫忙直接拔電在插電，現在問題出來了，完全不能開機了，現在就只能進去單人模式修復，其實修復也非常容易，進入開機選單，選擇 Single user mode 模式，進入之後會直接看到底下訊息提示:
enter full pathname of shell or return for :/bin/sh: 沒意外就直接按下 Enter 鍵就可以了，由於 fsck 指令在修復過程不可以先 mount 磁區，所以先利用 mount -a 來掛上所有磁區 # 掛上所有磁區
mount -a
# 顯示硬碟磁區
df -h Console 會看到 Filesystem Size Used Avail Capacity Mounted on
/dev/da0s1a 496M 341M 115M 75% /
devfs 1.0K 1.0K 0B 100% /dev
/dev/da0s1e 496M 16M 440M 4% /tmp
/dev/da0s1f 24G 15G 6.4G 71% /usr
/dev/da1s1d 33G 22G 8.4G 73% /usr/home
/dev/da0s1d 4.
<a href=https://blog.wu-boy.com/2011/01/freebsd-%E5%88%A9%E7%94%A8-fsck-%E6%8C%87%E4%BB%A4%E4%BF%AE%E5%BE%A9%E4%B8%8D%E6%AD%A3%E5%B8%B8%E6%96%B7%E9%9B%BB%E9%97%9C%E6%A9%9F/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/07/proftpd-useencoding-%E7%B9%81%E9%AB%94%E4%B8%AD%E6%96%87%E4%BA%82%E7%A2%BC%E8%A7%A3%E6%B1%BA-localization/><h2 class=post-title>ProFTPD UseEncoding 繁體中文亂碼解決 Localization</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on July 7, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;68&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><img src="https://i0.wp.com/farm5.static.flickr.com/4096/4770121725_6a997912c6_o.png?w=840&#038;ssl=1" alt=Proftpd data-recalc-dims=1> <a href=http://www.proftpd.org/>ProFTPD</a> 一直都是我最喜歡使用的 FTP 伺服器，設定方式簡單淺顯易懂，最近在用 <a href=http://www.pspad.com/>PSPad</a> 寫程式，發現使用內建 FTP 功能時候，連不上 <a href=http://www.freebsd.org>FreeBSD</a> 架設的 ProFTPD，連線過程出現許多亂碼，所以造成 PSPad 斷線出現錯誤，解決方式就是利用 <a href=http://www.proftpd.org/docs/modules/mod_lang.html>mod_lang</a> 模組，設定 <a href=http://www.proftpd.org/docs/modules/mod_lang.html#UseEncoding>UseEncoding</a> 讓系統可以顯示 Big5 中文編碼，FreeBSD Ports 請勾選</p><pre class="brush: bash; title: ; notranslate" title>[X] NLSUOTA Use nls (builds mod_lang)</pre>自行編譯請按照底下步驟<pre class="brush: bash; title: ; notranslate" title>./configure --enable-nls
make
make install </pre><h3 id=useencoding-設定>UseEncoding 設定</h3><pre class="brush: bash; title: ; notranslate" title>Syntax: UseEncoding on|off|local-charset client-charset
Default: None
Context: "server config", <virtualhost>, <global>
Module: mod_lang
Compatibility: 1.3.2rc1</pre>在 1.3.2rc1 版本之後才有支援，請複製底下設定，貼到 proftpd.conf<pre class="brush: bash; title: ; notranslate" title># 简体中文環境
UseEncoding UTF-8 GBK
# 繁体中文環境
UseEncoding UTF-8 Big5</pre>Reference:<p><a href=http://www.proftpd.org/docs/modules/mod_lang.html>ProFTPD module mod_lang</a> <a href=http://wanglq.blog.51cto.com/783560/340741>centos上解決proftp中文亂碼問題</a></p></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/proftpd/>proftpd</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/06/freebsd-update-apache-2-2-15-php-5-3-2-and-mysql-downgrade-to-5-1-9/><h2 class=post-title>[FreeBSD] update apache -> 2.2.15, PHP -> 5.3.2, and MySQL downgrade to 5.1.9</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 23, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;323&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>昨天升級了 FreeBSD 的 Apache, PHP, and MySQL，遇到很多地雷阿，最多的就是 PHP 的部份，因為本來自己使用 5.2.11 版本，但是在 commit port 的時候發生去裝 5.3.2 版本，所以就直接砍掉全部重練，先是遇到 MySQL 問題，原先在 database/mysql60-server 已經被 FreeBSD 移除，任何關於 mysql60 的相關 port 都被 remove 掉了，只好 downgrade 到 mysql 5.1.48 版本，移除同時順手把 apache PHP 相關都拿掉了。
移除 apache mysql php 相關 ports -rf 依序找尋相關 Mysql ports 移除 pkg_deinstall -rf mysql60-server 接下來安裝 MySQL 5.1.48 Server and Client，可以找到在 databases/mysql51-server and databases/mysql51-client，直接安裝即可
cd /usr/ports/databases/mysql51-server && make install 安裝 Apache 2.2.15 cd /usr/ports/www/apache22 && make WITH_MPM=worker install 安裝 PHP 5.
<a href=https://blog.wu-boy.com/2010/06/freebsd-update-apache-2-2-15-php-5-3-2-and-mysql-downgrade-to-5-1-9/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/apache/>apache</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/codeigniter/>CodeIgniter</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/mysql/>MySQL</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/03/apache-%E5%8F%96%E5%BE%97%E9%80%8F%E9%81%8E-reverse-proxy-varnish-%E7%9A%84-client-%E7%9C%9F%E6%AD%A3-ip-mod_rpaf/><h2 class=post-title>Apache 取得透過 Reverse Proxy (Varnish) 的 Client 真正 IP (mod_rpaf)</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 25, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;83&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>之前介紹 [FreeBSD]high performance caching reverse proxy: Varnish (安裝架設篇) 來當 Web 前端 Reverse Proxy，也有 load balance 的功能，不過碰到這樣的環境，後端 Apache Server 只會抓到 Reverse Proxy IP 來當作 log 紀錄，而無法正確取得 Client 端 IP，Varnish 官網 FAQ 有提到 log 檔案得的解決方法，不過在程式方面，要大量的修改，假設今天 Apache 跑10個 Virtual Host ，不就要去改10個網站程式，背後或許是一些大型 open source 的 Project，改起來相當不容易，也很費工夫。Darkhero 提供了 reverse proxy add forward module for Apache (mod_rpaf) 模組，只要裝上這模組，Apache 就不必動到其它設定就可以正確紀錄 log 檔案，且程式都不必修改，就可以得到正確 IP 了。 FreeBSD Ports 安裝方式：
cd /usr/ports/www/mod_rpaf2/
make install clean 修改 httpd.conf (FreeBSD: /usr/local/etc/apache22/httpd.conf) LoadModule rpaf_module libexec/apache22/mod_rpaf.
<a href=https://blog.wu-boy.com/2010/03/apache-%E5%8F%96%E5%BE%97%E9%80%8F%E9%81%8E-reverse-proxy-varnish-%E7%9A%84-client-%E7%9C%9F%E6%AD%A3-ip-mod_rpaf/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/apache/>apache</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/mod_rpaf/>mod_rpaf</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/varnish/>Varnish</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/03/freebsdhigh-performance-caching-reverse-proxy-varnish-and-how-to-install-it/><h2 class=post-title>[FreeBSD]high performance caching reverse proxy: Varnish (安裝架設篇)</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 20, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;395&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>在上禮拜跟 DarkHero 兄聊到 How To Build a Scalable Web Site (3/6) 的上課講義，互相討論了 MySQL Load balance 以及 http reverse proxy 的方式，以前自己有用 HAProxy 當作 Web 平衡負載，順便紀錄了 HAProxy FreeBSD 安裝方式，這次要來介紹今天重點：Varnish Cache Server，在近幾年流行的 Caching 機制，大家會想到 Squid，只要您設定良好的 Squid 參數，它一定運作的非常穩定，然而它的核心依然是 forward proxy，要架設成 Reverse Proxy 還必需要設定一些參數才可以達到，是有一定的困難性，然而 Varnish Cache Server 底層就是高效能 caching reverse proxy，也因為 Squid 是 1980 年發展出來的，程式架構過於老舊，可以參考 ArchitectNotes 瞭解這部份詳情。也許您會問到 Varnish 可以架設成 forward proxy 嗎？答案是可以的，但是您也許不會這麼做，因為它需要 DNS 技術，以及需要一個非常大且複雜的 Varnish VCL(Varnish Configuration Language) file。 1. 今天要介紹如何在 FreeBSD 系統安裝，在介紹之前，系統必須先安裝好 apache，這樣才可以正確啟動，利用 ports 安裝：
<a href=https://blog.wu-boy.com/2010/03/freebsdhigh-performance-caching-reverse-proxy-varnish-and-how-to-install-it/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/apache/>apache</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/haproxy/>HAProxy</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/squid/>Squid</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/varnish/>Varnish</a>&nbsp;</div></article></div><ul class="pager main-pager"><li class=next><a href=https://blog.wu-boy.com/categories/freebsd/page/2/>Older Posts &rarr;</a></li></ul></div></div></div><footer class=post-footer><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:appleboy.tw@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/appleboy46 title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/appleboy title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/appleboy title=GitLab><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://bitbucket.org/appleboy title=Bitbucket><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/appleboy title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/appleboy title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/channel/UCLCZJ9d_I7UJP2bpXpge8KA title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/categories/freebsd/feed.xml title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://blog.wu-boy.com>Appleboy</a>
&nbsp;&bull;&nbsp;&copy;
2023
&nbsp;&bull;&nbsp;
<a href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.112.5</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://blog.wu-boy.com/js/main.js></script>
<script>(function(){var t,n="003841896160749976666:l9i5hqttpqi",e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx="+n,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>$(function(){$("#show-comments").on("click",function(){var e="appleboy48";(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//appleboy48.disqus.com/count.js async></script><div class=back-to-top id=back-to-top><i class="fas fa-angle-double-up"></i></div></body></html>