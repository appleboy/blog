<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>php - 小惡魔 - AppleBOY</title><meta name=author content="Appleboy"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"小惡魔 - AppleBOY","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/blog.wu-boy.com"}</script><meta property="og:title" content="php"><meta property="og:image" content="https://lh3.googleusercontent.com/jsocHCR9A9yEfDVUTrU0m42_aHhTEVDGW5p5PsQSx7GSlkt3gLjohfXH3S7P7p982332ruU_e-EtW0LwmiuZjvN65VIcyME-zE35C6EM0IV1nqY6KoNw3dwW2djjid3F-T5YgnJothA=w1920-h1080"><meta property="og:url" content="https://blog.wu-boy.com/categories/php/"><meta property="og:type" content="website"><meta property="og:site_name" content="小惡魔 - AppleBOY"><meta name=twitter:title content="php"><meta name=twitter:image content="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080"><meta name=twitter:card content="summary"><meta name=twitter:site content="@appleboy"><meta name=twitter:creator content="@appleboy"><link href=https://i.imgur.com/PpOg8Dz.jpg rel=icon type=image/x-icon><meta name=generator content="Hugo 0.98.0"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css><link rel=stylesheet href=https://blog.wu-boy.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://blog.wu-boy.com/css/syntax.css><link rel=stylesheet href=https://blog.wu-boy.com/css/codeblock.css><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/php/feed.xml title="小惡魔 - AppleBOY"><link rel=alternate type=application/rss+xml href=https://blog.wu-boy.com/categories/php/feed.xml title="小惡魔 - AppleBOY"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-5766319-6","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title="Youtube 頻道" href=http://bit.ly/youtube-boy><i class="fab fa-youtube"></i> Youtube 頻道</a></li><li class=navlinks-container><a class=navlinks-parent><i class="fas fa-video"></i> 線上課程</a><div class=navlinks-children><a href=/golang-online-course/>Go 語言基礎實戰</a>
<a href=/docker-course/>Docker 容器開發實戰</a>
<a href=/drone-devops/>一天學會 DevOps 自動化流程</a></div></li><li><a title=歷年文章 href=/archives/><i class="fas fa-sitemap fa-lg"></i> 歷年文章</a></li><li><a href=#modalSearch data-toggle=modal data-target=#modalSearch style=outline:none><span class="hidden-sm hidden-md hidden-lg">Search</span> <span id=searchGlyph class="glyphicon glyphicon-search"></span></a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="小惡魔 - AppleBOY" href=https://blog.wu-boy.com><img class=avatar-img src="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080" alt="小惡魔 - AppleBOY"></a></div></div></div></nav><div id=modalSearch class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&#215;</button><h4 class=modal-title>Search 小惡魔 - AppleBOY</h4></div><div class=modal-body><gcse:search></gcse:search></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><div class=categories-heading><h1>php</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-md-10 col-md-offset-1"><div class=posts-list><article class=post-preview><a href=https://blog.wu-boy.com/2010/06/phpbb3-%E5%A4%96%E6%8E%9B-%E6%A0%B9%E6%93%9A%E4%BD%BF%E7%94%A8%E8%80%85%E6%96%87%E7%AB%A0%E6%95%B8%E7%9B%AE%E9%99%90%E5%88%B6%E7%B0%BD%E5%90%8D%E6%AA%94%E9%A1%AF%E7%A4%BA/><h2 class=post-title>[phpBB3 外掛] 根據使用者文章數目限制簽名檔顯示</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 13, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;210&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>前一篇提到：『[教學] phpBB3 使用者簽名檔 url 連結加上 rel=”nofollow”』，本篇會將其做成後台，方便管理者可以從後台管理，這次加上一個新功能：『限制使用者顯示簽名檔』，根據使用者文章數量來決定是否顯示簽名檔，可以避免想要來打廣告的新註冊使用者，限制文章數量是一種方式，但是也不是最好的方式，phpBB3 本身可以在後台限制是否顯示使用者簽名檔，不過我想各大站長都會開放此功能，好讓使用者可以放個人網站或者是部落格，底下是外掛安裝方式：
安裝 打開 includes/acp/acp_board.php 找尋
#
# Find
#
'max_sig_img_height' = array('lang' = 'MAX_SIG_IMG_HEIGHT', 'validate' = 'int:0', 'type' = 'text:5:4', 'explain' = true, 'append' = ' ' . $user-lang['PIXEL']), 後面加上 #
# after add
#
'max_sig_post_count_limit' = array('lang' = 'MAX_SIG_POSTS_LIMIT', 'validate' = 'int:0', 'type' = 'text:5:4', 'explain' = true),
打開 viewtopic.php 找尋
#
# Find
#
if ($row['user_sig'] && $config['allow_sig'] && $user-optionget('viewsigs')) 取代 #
# Replace
#
if (($row['user_sig'] && $config['allow_sig'] && $user-optionget('viewsigs') && $row['user_posts'] = $config['max_sig_post_count_limit']) || (isset($user-data['session_admin']) && $user-data['session_admin'])) 中文化 打開 language/zh_cmn_hant/acp/board.
<a href=https://blog.wu-boy.com/2010/06/phpbb3-%E5%A4%96%E6%8E%9B-%E6%A0%B9%E6%93%9A%E4%BD%BF%E7%94%A8%E8%80%85%E6%96%87%E7%AB%A0%E6%95%B8%E7%9B%AE%E9%99%90%E5%88%B6%E7%B0%BD%E5%90%8D%E6%AA%94%E9%A1%AF%E7%A4%BA/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/phpbb3/>phpBB3</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/06/%E6%95%99%E5%AD%B8-phpbb3-%E4%BD%BF%E7%94%A8%E8%80%85%E7%B0%BD%E5%90%8D%E6%AA%94-url-%E9%80%A3%E7%B5%90%E5%8A%A0%E4%B8%8A-relnofollow/><h2 class=post-title>[教學] phpBB3 使用者簽名檔 url 連結加上 rel=”nofollow”</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 10, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;210&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>基於 Moztw 討論區 有大陸使用者註冊之後，在簽名檔加入一些廣告連結，為了降低 Google Page Rank，所以我們必須指示搜尋引擎「不要前往此網頁上的連結」或是「不要前往此連結」，可以參考 關於 rel=&ldquo;nofollow&rdquo;，phpBB3 編輯三個檔案就可以了，此修改不影響文章內容，只有針對簽名檔作用，底下是 patch 程式碼，可以參考看看 includes/bbcode.php
--- phpBB3/includes/bbcode.php 2010-03-06 04:37:23.000000000 +0800
+++ www/includes/bbcode.php 2010-06-10 20:58:02.000000000 +0800
@@ -2,7 +2,8 @@
/**
*
* @package phpBB3
-* @version $Id$
+* @version $Id: bbcode.php 9461 2009-04-17 15:23:17Z acydburn $
+* @log 2010-06-10 appleboy $
* @copyright (c) 2005 phpBB Group
* @license http://opensource.org/licenses/gpl-license.php GNU Public License
*
@@ -48,7 +49,7 @@
/**
* Second pass bbcodes
*/
- function bbcode_second_pass(&$message, $bbcode_uid = '', $bbcode_bitfield = false)
+ function bbcode_second_pass(&$message, $bbcode_uid = '', $bbcode_bitfield = false, $bbcode_is_sig = false)
{
if ($bbcode_uid)
{
@@ -110,6 +111,13 @@
}
$message = preg_replace($preg['search'], $preg['replace'], $message);
+
+ /*
+ * 2010.
<a href=https://blog.wu-boy.com/2010/06/%E6%95%99%E5%AD%B8-phpbb3-%E4%BD%BF%E7%94%A8%E8%80%85%E7%B0%BD%E5%90%8D%E6%AA%94-url-%E9%80%A3%E7%B5%90%E5%8A%A0%E4%B8%8A-relnofollow/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/phpbb3/>phpBB3</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/06/php-%E5%A5%BD%E7%94%A8-debug-php-%E5%B7%A5%E5%85%B7-firephp-for-firefox-on-codeigniter/><h2 class=post-title>[PHP] 好用 Debug PHP 工具 FirePHP for FireFox on CodeIgniter</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 7, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;274&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>之前介紹過 javascript FireFox Debug 工具 FireBug (Using firebug for firefox 除錯 javascript)，今天來介紹 PHP 除錯工具 FirePHP，它可以輸出 PHP 資料到 FireBug console 介面，方便解決 PHP 相關問題，而不會去影響線上網站的畫面，安裝方式非常簡單，請先安裝 FireFox addon for FirePHP，重新啟動 FireFox 這樣就安裝成功了，接下來就是 include FirePHP Library 檔案，就可以正常使用了。另外還會介紹如何安裝到 CodeIgniter PHP Framework Firebug: https://addons.mozilla.org/en-US/firefox/addon/1843 FirePHP: https://addons.mozilla.org/en-US/firefox/addon/6149 底下先看畫面：
$array = array("a" = "1", "b" = "2");
$firephp-info($array, "info");
$firephp-warn($array, "warn");
$firephp-error($array, "error");
Install FirePHP 安裝 Ref : http://www.firephp.org/HQ/Install.htm 在 Zend Framework 已經有開發完成，可以參考：FirePHP and Zend Framework 1.6 下載檔案：Download FirePHPCore library version 0.
<a href=https://blog.wu-boy.com/2010/06/php-%E5%A5%BD%E7%94%A8-debug-php-%E5%B7%A5%E5%85%B7-firephp-for-firefox-on-codeigniter/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/codeigniter/>CodeIgniter</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/firefox/>Firefox</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/firephp/>FirePHP</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2010/03/freebsdhigh-performance-caching-reverse-proxy-varnish-and-how-to-install-it/><h2 class=post-title>[FreeBSD]high performance caching reverse proxy: Varnish (安裝架設篇)</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 20, 2010
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;381&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>在上禮拜跟 DarkHero 兄聊到 How To Build a Scalable Web Site (3/6) 的上課講義，互相討論了 MySQL Load balance 以及 http reverse proxy 的方式，以前自己有用 HAProxy 當作 Web 平衡負載，順便紀錄了 HAProxy FreeBSD 安裝方式，這次要來介紹今天重點：Varnish Cache Server，在近幾年流行的 Caching 機制，大家會想到 Squid，只要您設定良好的 Squid 參數，它一定運作的非常穩定，然而它的核心依然是 forward proxy，要架設成 Reverse Proxy 還必需要設定一些參數才可以達到，是有一定的困難性，然而 Varnish Cache Server 底層就是高效能 caching reverse proxy，也因為 Squid 是 1980 年發展出來的，程式架構過於老舊，可以參考 ArchitectNotes 瞭解這部份詳情。也許您會問到 Varnish 可以架設成 forward proxy 嗎？答案是可以的，但是您也許不會這麼做，因為它需要 DNS 技術，以及需要一個非常大且複雜的 Varnish VCL(Varnish Configuration Language) file。 1. 今天要介紹如何在 FreeBSD 系統安裝，在介紹之前，系統必須先安裝好 apache，這樣才可以正確啟動，利用 ports 安裝：
<a href=https://blog.wu-boy.com/2010/03/freebsdhigh-performance-caching-reverse-proxy-varnish-and-how-to-install-it/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/apache/>apache</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/haproxy/>HAProxy</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/squid/>Squid</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/varnish/>Varnish</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/12/php-framework-how-to-implement-plurk-api-in-codeigniter/><h2 class=post-title>[PHP Framework] How to implement Plurk API in CodeIgniter</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 30, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;803&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a href=https://www.flickr.com/photos/appleboy/4228352638/ title="ci_logo2 (by appleboy46)"><img src="https://i2.wp.com/farm3.static.flickr.com/2519/4228352638_19b13306d3_o.gif?resize=170%2C73&ssl=1" title="ci_logo2 (by appleboy46)" alt="ci_logo2 (by appleboy46)" data-recalc-dims=1></a> 很開心在12月看到 <a href=http://www.plurk.com/API>Plurk Release API</a> 出來，而自己也跟網路上一些朋友合作開發 <a href=http://code.google.com/p/php-plurk-api/>PHP implementation of Plurk API</a>，Plurk (簡稱噗浪)在台灣這一兩年紅了起來，網路高手分別針對噗浪研究產生非官方的 API，現在官網 Release 出來，提供了 <a href=http://en.wikipedia.org/wiki/Java_(programming_language)>Java</a> 跟 <a href=http://www.python.org/>Python</a> 的 Example，我想因為 Plurk 是用 Python 寫出來的，所以提供了範例，但是 API 出來沒多久，<a href=http://blog.roga.tw/>roga</a> 就集合了網路一些強者，一起開發了 PHP Plurk API，我也拿了此 API 在實作到 <a href=http://codeigniter.com>CodeIgniter Framework</a>，讓在使用此套 open source 的使用者可以享用 Plurk API。不過從2009.12.29日之後，Plurk 官網有限制每天只能 call 50.000 次，已經蠻多了，不要操掛 Plurk 的機器阿。</p><a href=https://blog.wu-boy.com/2009/12/php-framework-how-to-implement-plurk-api-in-codeigniter/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/codeigniter/>CodeIgniter</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/plurk-api/>Plurk API</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/12/php-release-%E5%99%97%E6%B5%AA-php-plurk-api-1-2-beta/><h2 class=post-title>[PHP] Release 噗浪 php-plurk-api 1.2 Beta.</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 24, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;39&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p><a href=http://www.plurk.com>Plurk</a> 官網在2009年12月4日提供了 <a href=http://www.plurk.com/API>API platform</a>，這是大家所期待很久的，裡面只有提供 <a href=http://www.python.org/>Python</a> 跟 <a href=http://en.wikipedia.org/wiki/Java_%28programming_language%29>Java</a> 的 example 範例，所以強者我朋友 <a href=http://blog.roga.tw/>roga</a> 發起了 <a href=https://code.google.com/p/php-plurk-api/>php-plurk-api</a> 架構，來造福 PHP 使用者，當初在 roga 在 plurk 上面徵求是否有人想要一起開發程式，我就當場報名了，後來也陸續多了很多強者好友：<a href=http://blog.twkang.net/>Whatup</a>、<a href=http://chrisliu.net/>ChrisLiu</a>、<a href=http://bigair.pixnet.net/blog>Limit</a>…等加入進行模組撰寫，很快的就產出了 php-plurk-api 1.2 Beta，也利用官方網站 API 來撰寫註解，然後搭配 <a href=http://www.phpdoc.org/>phpDocumentor</a> 產出文件，這一切都集結了很多人的努力，也讓官方網站放上了大家共同結晶。 如果大家想使用，可以從 <a title="php-plurk-api source code" onclick='pageTracker._trackPageview("/outgoing/code.google.com/p/php-plurk-api/")' href=https://code.google.com/p/php-plurk-api/>php-plurk-api source code</a>. 下載。^^ 其他延伸： <a title="Permalink to: Release: php-plurk-api 1.2 Beta." rel=bookmark href=http://blog.roga.tw/2009/12/18/2341>Release: php-plurk-api 1.2 Beta.</a> <a title=php-plurk-api onclick='pageTracker._trackPageview("/outgoing/plurk.lab3.tw")' href=http://plurk.lab3.tw/>php-plurk-api website.</a></p></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/plurk-api/>Plurk API</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/12/phpmysql-%E7%92%B0%E5%A2%83%E4%B8%8B-sql-injection-%E6%94%BB%E9%98%B2%E6%88%B0/><h2 class=post-title>PHP+MySQL 環境下 SQL Injection 攻防戰</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on December 6, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;222&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>在 <a href=http://www.ourmysql.com/>OurMySQL Blog</a> 看到這篇：『<a href=http://www.ourmysql.com/archives/791>PHP+MySQL环境下SQL Injection攻防总结</a>』寫的相當不錯，裡面有一些觀念，可以讓初學 PHP & MySQL 的使用者知道如何防護 <a href=http://en.wikipedia.org/wiki/SQL_injection>SQL Injection (資料隱碼)</a>，內容提到 <a href=http://tw2.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc>magic_quotes_gpc</a> 在 on 跟 off 的狀況如何防護，但是可以清楚看到 <a href=http://tw2.php.net/>PHP</a> 官方文件提到在 PHP 5.3.0 magic_quotes_gpc 預設已經是關閉，在 PHP 6.0 之後正式移除，所以內容寫的 magic_quotes_gpc 狀況，可以大致上瞭解就好，真正防護 SQL Injection 是需要寫程式或者是考慮很多方式去防護。 一般在做文章查詢，都會使用 <span style=color:green>/articles.php?id=123</span> 網址傳送方式，以 $_GET[&lsquo;id&rsquo;] 送到 PHP 頁面去做處理，如果駭客想要測試是否可以利用 SQL Injection 做攻擊，可以在網址列加上 <span style=color:green>/articles.php?id=123</span><span style=color:red>&rsquo;</span>，請注意網址後面多出 <span style=font-size:11pt;color:red>&rsquo;</span>，如果沒有把 $_GET[&lsquo;id&rsquo;] 做處理的話，就會出現底下錯誤訊息：</p><blockquote><p><span style=color:red>supplied argument is not a valid MySQL result resource in</span> 這是因為平常在寫 SQL 語法，會是底下這種寫法：</p></blockquote><pre class="brush: php; title: ; notranslate" title>$sql = "SELECT id, title, content FROM articles WHERE id = '".$_GET['id']."'";
$result = mysq_query($sql);</pre>因為沒有處理跳脫字元 '，所以造成 SQL 語法錯誤，才會出現該錯誤訊息，但是如果又針對跳脫字元做防護得時候，還有另一種攻擊方式：<blockquote><p><span style=color:green>/articles.php?id=0 union select 1,2,load_file(char(47,101,116,99,47,112,97,115,115,119,100))</span> 其中的數字就是/etc/passwd 字符串的ASCII，除此之外，還可以使用字串 16 進位方式：</p></blockquote><blockquote><p><span style=color:green>/articles.php?id=0 union select 1,2,load_file(0×2f6574632f706173737764)</span> 可以參考一下 <a href=http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_load-file>MySQL LOAD_FILE(file_name)</a>，底下文章提到了很多方式解決。</p></blockquote><a href=https://blog.wu-boy.com/2009/12/phpmysql-%E7%92%B0%E5%A2%83%E4%B8%8B-sql-injection-%E6%94%BB%E9%98%B2%E6%88%B0/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/11/perlphp-time-and-classdate-%E6%97%A5%E6%9C%9F%E8%BD%89%E6%8F%9B%E9%81%8B%E7%AE%97/><h2 class=post-title>[Perl&PHP] time() and Class::Date 日期轉換運算</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on November 3, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;247&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>為了看個 <a href=http://mlb.mlb.com/index.jsp>MLB</a> 美國職棒，寫了一個網站：<a href=http://mimi.twgg.org/>美國職棒影片收集站</a>，裡面的內容影片連結，以及連結說明，都是利用 <a href=http://www.perl.org/>Perl</a> 搭配 <a href=http://www.mysql.com/>MySQL</a> 資料庫，以及 <a href=http://codeigniter.com/>CodeIgniter PHP Framework</a> 寫出來的，美國 MLB 開打時間，會比台灣晚一天的時差，所以在 <a href=http://www.php.net>PHP</a> 跟 Perl 都要針對時間作修改以及轉換運算，那底下會寫 PHP 跟 Perl 如何控制時間，還有資料庫如何設計，會比較適當。</p><h2 id=span-stylecolor-008000php-日期轉換span-mysql-在資料庫時間格式方面最主要常見的兩種儲存方式一種就是-mysql-預設-datetime顯示的格式就會像是><span style=color:green>PHP 日期轉換</span> MySQL 在資料庫時間格式方面，最主要常見的兩種儲存方式，一種就是 MySQL 預設 datetime，顯示的格式就會像是</h2><p><span style=color:red>2009-11-03 20:10:43</span>，另一種就是存成 <a href=http://en.wikipedia.org/wiki/Unix_time>UNIX time</a> 格式，可以設定為 int(11)，這兩種其實都可以使用，在 <a href=http://www.phpbb.com/>phpBB2</a> 是採用後者的方式，因為 open source 要支援多種資料庫，但是又要統一程式碼，所以乾脆用 UNIX 的時間標記，這樣比較好轉換時區，如果使用 UNIX 格式，可以利用 <a href=http://php.net/manual/en/function.time.php>time()</a> 函式來取的。</p><a href=https://blog.wu-boy.com/2009/11/perlphp-time-and-classdate-%E6%97%A5%E6%9C%9F%E8%BD%89%E6%8F%9B%E9%81%8B%E7%AE%97/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/freebsd/>FreeBSD</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/perl/>Perl</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/10/codeigniter-%E8%A7%A3%E6%B1%BA-ci-%E4%B8%8B%E8%BC%89%E5%87%BD%E6%95%B8-force_download-%E5%9C%A8-ie-%E5%BA%95%E4%B8%8B%E6%AA%94%E6%A1%88%E6%A8%99%E9%A1%8C%E4%BA%82%E7%A2%BC/><h2 class=post-title>[CodeIgniter] 解決 CI 下載函數 force_download 在 IE 底下檔案標題亂碼</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on October 26, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;181&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry>CodeIgniter 底下提供了 force_download 函數，讓使用者可以直接下載檔案，但是會遇到中文的問題，IE 底下開起來檔名會是亂碼，force_download(&lsquo;filename&rsquo;, &lsquo;data&rsquo;) 如果 filename 使用中文，測試 FireFox 跟 Chrome 都是沒問題的，唯獨 IE 開起來就是有問題，所以麻煩請修改 helpers/download_helper.php 這隻程式。
if ( ! function_exists('force_download'))
{
function force_download($filename = '', $data = '')
{
if ($filename == '' OR $data == '')
{
return FALSE;
}
// Try to determine if the filename includes a file extension.
// We need it in order to set the MIME type
if (FALSE === strpos($filename, '.'))
{
return FALSE;
}
// Grab the file extension
$x = explode('.
<a href=https://blog.wu-boy.com/2009/10/codeigniter-%E8%A7%A3%E6%B1%BA-ci-%E4%B8%8B%E8%BC%89%E5%87%BD%E6%95%B8-force_download-%E5%9C%A8-ie-%E5%BA%95%E4%B8%8B%E6%AA%94%E6%A1%88%E6%A8%99%E9%A1%8C%E4%BA%82%E7%A2%BC/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/codeigniter/>CodeIgniter</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article><article class=post-preview><a href=https://blog.wu-boy.com/2009/10/%E8%AC%9B%E7%BE%A9%E5%B1%8F%E7%A7%91%E5%A4%A7-php-mysql-%E5%9F%BA%E7%A4%8E%E6%95%99%E5%AD%B8%E6%8A%95%E5%BD%B1%E7%89%87/><h2 class=post-title>[講義]屏科大 PHP & MySQL 基礎教學投影片</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on October 17, 2009
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;13&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></p><div class=post-entry><p>這次非常開心受到<a href=http://www.mis.npust.edu.tw/index.jsp>國立屏東科技大學資管系</a>邀請講課，主題是 PHP & MySQL 基礎介紹，來聽課的學生，就是資管系大三跟碩一的新生，第一次到屏科大，沒想到學校大到很誇張阿，在校園裡面都是騎機車上課，不像在<a href=http://www.ndhu.edu.tw>東華大學</a>，只能騎外環道，剩下的只能騎腳踏車，屏科大其實蠻偏僻的，離屏東市有一段距離，大概騎摩托車要 20 分鐘，至少今天回家是被用摩托車送到屏東火車站，感覺屏東還蠻熱鬧的。</p><p>這些資管的學生還蠻認真的，基礎實力還不錯，不過還是要在加強一下，看屏科大資管都在學 <a href=http://www.asp.net/>ASP.net</a>，對於 html 有些基礎，大家好像都蠻喜歡拉物件，說這樣寫程式還蠻快的，不過 PHP 好像沒有類似工具，今天上課蠻順利的，至少大家都聽的懂，課堂作業都有寫出來，還蠻開心的，想聽聽大家對我上課的意見，看來只好等下次上課在問問看他們。</p></div><div class=blog-tags><a href=https://blog.wu-boy.com/tags/mysql/>MySQL</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/php/>php</a>&nbsp;</div></article></div><ul class="pager main-pager"><li class=previous><a href=https://blog.wu-boy.com/categories/php/page/9/>&larr; Newer Posts</a></li><li class=next><a href=https://blog.wu-boy.com/categories/php/page/11/>Older Posts &rarr;</a></li></ul></div></div></div><footer class=post-footer><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:appleboy.tw@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/appleboy46 title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/appleboy title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/appleboy title=GitLab><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://bitbucket.org/appleboy title=Bitbucket><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/appleboy title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/appleboy title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/channel/UCLCZJ9d_I7UJP2bpXpge8KA title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/categories/php/feed.xml title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://blog.wu-boy.com>Appleboy</a>
&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.98.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://blog.wu-boy.com/js/main.js></script>
<script>(function(){var t,n="003841896160749976666:l9i5hqttpqi",e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx="+n,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>$(function(){$("#show-comments").on("click",function(){var e="appleboy48";(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//appleboy48.disqus.com/count.js async></script><div class=back-to-top id=back-to-top><i class="fas fa-angle-double-up"></i></div></body></html>