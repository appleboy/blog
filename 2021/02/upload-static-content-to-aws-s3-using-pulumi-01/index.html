<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>初探 Pulumi 上傳靜態網站到 AWS S3 (一) - 小惡魔 - AppleBOY</title><meta name=description content="
上一篇作者提到了兩套 Infrastructure as Code 工具，分別是 Terraform 跟 Pulumi，大家對於前者可能會是比較熟悉，那本篇用一個實際案例『建立 AWS S3 並上傳靜態網站』來跟大家分享如何從無開始一步一步使用 Pulumi。本教學使用的程式碼都可以在 GitHub 上面瀏覽及下載。教學會拆成七個章節:

建立 Pulumi 新專案
設定 AWS 環境
初始化 Pulumi 架構 (建立 S3 Bucket)
更新 AWS 架構 (S3 Hosting)
設定 Pulumi Stack 環境變數 (教學二)
建立第二個 Pulumi Stack 環境 (教學二)
刪除 Pulumi Stack 環境 (教學二)
"><meta name=author content="Appleboy"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"小惡魔 - AppleBOY","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/blog.wu-boy.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/blog.wu-boy.com","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/blog.wu-boy.com\/2021\/02\/upload-static-content-to-aws-s3-using-pulumi-01\/","name":"初探 pulumi 上傳靜態網站到 aws s3 (一)"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"appleboy"},"headline":"初探 Pulumi 上傳靜態網站到 AWS S3 (一)","description":"\n上一篇作者提到了兩套 Infrastructure as Code 工具，分別是 Terraform 跟 Pulumi，大家對於前者可能會是比較熟悉，那本篇用一個實際案例『建立 AWS S3 並上傳靜態網站』來跟大家分享如何從無開始一步一步使用 Pulumi。本教學使用的程式碼都可以在 GitHub 上面瀏覽及下載。教學會拆成七個章節:\n建立 Pulumi 新專案 設定 AWS 環境 初始化 Pulumi 架構 (建立 S3 Bucket) 更新 AWS 架構 (S3 Hosting) 設定 Pulumi Stack 環境變數 (教學二) 建立第二個 Pulumi Stack 環境 (教學二) 刪除 Pulumi Stack 環境 (教學二) ","inLanguage":"en","wordCount":1840,"datePublished":"2021-02-11T07:29:56","dateModified":"2021-02-11T07:29:56","image":"https:\/\/lh3.googleusercontent.com\/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080","keywords":["golang, pulumi"],"mainEntityOfPage":"https:\/\/blog.wu-boy.com\/2021\/02\/upload-static-content-to-aws-s3-using-pulumi-01\/","publisher":{"@type":"Organization","name":"https:\/\/blog.wu-boy.com","logo":{"@type":"ImageObject","url":"https:\/\/lh3.googleusercontent.com\/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080","height":60,"width":60}}}</script><meta property="og:title" content="初探 Pulumi 上傳靜態網站到 AWS S3 (一)"><meta property="og:description" content="
上一篇作者提到了兩套 Infrastructure as Code 工具，分別是 Terraform 跟 Pulumi，大家對於前者可能會是比較熟悉，那本篇用一個實際案例『建立 AWS S3 並上傳靜態網站』來跟大家分享如何從無開始一步一步使用 Pulumi。本教學使用的程式碼都可以在 GitHub 上面瀏覽及下載。教學會拆成七個章節:

建立 Pulumi 新專案
設定 AWS 環境
初始化 Pulumi 架構 (建立 S3 Bucket)
更新 AWS 架構 (S3 Hosting)
設定 Pulumi Stack 環境變數 (教學二)
建立第二個 Pulumi Stack 環境 (教學二)
刪除 Pulumi Stack 環境 (教學二)
"><meta property="og:image" content="https://lh3.googleusercontent.com/jsocHCR9A9yEfDVUTrU0m42_aHhTEVDGW5p5PsQSx7GSlkt3gLjohfXH3S7P7p982332ruU_e-EtW0LwmiuZjvN65VIcyME-zE35C6EM0IV1nqY6KoNw3dwW2djjid3F-T5YgnJothA=w1920-h1080"><meta property="og:url" content="https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-01/"><meta property="og:type" content="website"><meta property="og:site_name" content="小惡魔 - AppleBOY"><meta name=twitter:title content="初探 Pulumi 上傳靜態網站到 AWS S3 (一)"><meta name=twitter:description content="
上一篇作者提到了兩套 Infrastructure as Code 工具，分別是 Terraform 跟 Pulumi，大家對於前者可能會是比較熟悉，那本篇用一個實際案例『建立 AWS S3 並上傳靜態網站』來跟大家分享如何從無開始一步一步使用 Pulumi。本教學使用的程式碼都可以在 GitHub 上面瀏覽及下載。教學會拆成七個章節:

建立 Pulumi 新專案
設定 AWS …"><meta name=twitter:image content="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080"><meta name=twitter:card content="summary"><meta name=twitter:site content="@appleboy"><meta name=twitter:creator content="@appleboy"><link href=https://i.imgur.com/PpOg8Dz.jpg rel=icon type=image/x-icon><meta name=generator content="Hugo 0.100.1"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css><link rel=stylesheet href=https://blog.wu-boy.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://blog.wu-boy.com/css/syntax.css><link rel=stylesheet href=https://blog.wu-boy.com/css/codeblock.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-5766319-6','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title="Youtube 頻道" href=http://bit.ly/youtube-boy><i class="fab fa-youtube"></i> Youtube 頻道</a></li><li class=navlinks-container><a class=navlinks-parent><i class="fas fa-video"></i> 線上課程</a><div class=navlinks-children><a href=/golang-online-course/>Go 語言基礎實戰</a>
<a href=/docker-course/>Docker 容器開發實戰</a>
<a href=/drone-devops/>一天學會 DevOps 自動化流程</a></div></li><li><a title=歷年文章 href=/archives/><i class="fas fa-sitemap fa-lg"></i> 歷年文章</a></li><li><a href=#modalSearch data-toggle=modal data-target=#modalSearch style=outline:none><span class="hidden-sm hidden-md hidden-lg">Search</span> <span id=searchGlyph class="glyphicon glyphicon-search"></span></a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="小惡魔 - AppleBOY" href=https://blog.wu-boy.com><img class=avatar-img src="https://lh3.googleusercontent.com/Kq9CxHZWopKj__EgF_BpzLv8FhwvDkc0iacrl9V5IJjpr-dZ7Y5O-Vc1i9FhGQ8gHTdKeBisG_1ie1IONQXmK0a3myyl_BNouP76CLHGHRzsPPRgRF3RiKYqOkdS86mZOIu7KYFTUio=w1920-h1080" alt="小惡魔 - AppleBOY"></a></div></div></div></nav><div id=modalSearch class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&#215;</button><h4 class=modal-title>Search 小惡魔 - AppleBOY</h4></div><div class=modal-body><gcse:search></gcse:search></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><div class=post-heading><h1>初探 Pulumi 上傳靜態網站到 AWS S3 (一)</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on February 11, 2021
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;9&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1840&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;appleboy</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-md-10 col-md-offset-1"><aside class=toc-article><nav id=TableOfContents><ul><li><ul><li><a href=#教學影片>教學影片</a></li><li><a href=#用-pulumi-建立新專案>用 Pulumi 建立新專案</a><ul><li><a href=#步驟一-安裝-pulumi-cli-工具>步驟一: 安裝 Pulumi CLI 工具</a></li><li><a href=#步驟二-初始化專案>步驟二: 初始化專案</a></li><li><a href=#步驟三-檢查專案目錄結構>步驟三: 檢查專案目錄結構</a></li></ul></li><li><a href=#設定-aws-環境>設定 AWS 環境</a><ul><li><a href=#前置作業>前置作業</a></li><li><a href=#步驟一-設定-aws-region>步驟一: 設定 AWS Region</a></li><li><a href=#步驟二-設定-aws-profile>步驟二: 設定 AWS Profile</a></li></ul></li><li><a href=#初始化-pulumi-架構-建立-s3-bucket>初始化 Pulumi 架構 (建立 S3 Bucket)</a><ul><li><a href=#步驟一-建立新的-s3-bucket>步驟一: 建立新的 S3 Bucket</a></li><li><a href=#步驟二-執行-pulumi-cli-預覽>步驟二: 執行 Pulumi CLI 預覽</a></li><li><a href=#步驟三-執行部署>步驟三: 執行部署</a></li><li><a href=#步驟四-顯示更多-bucket-詳細資訊>步驟四: 顯示更多 Bucket 詳細資訊</a></li><li><a href=#步驟五-更新-bucket-名稱>步驟五: 更新 Bucket 名稱</a></li></ul></li><li><a href=#更新-aws-架構-s3-hosting>更新 AWS 架構 (S3 Hosting)</a><ul><li><a href=#步驟一-建立-indexhtml-放入-s3-內>步驟一: 建立 index.html 放入 S3 內</a></li><li><a href=#步驟二-設定-s3-為-web-hosting>步驟二: 設定 S3 為 Web Hosting</a></li><li><a href=#步驟三-測試-url>步驟三: 測試 URL</a></li></ul></li><li><a href=#心得>心得</a></li></ul></li></ul></nav></aside><article role=main class=blog-post><p><a href="https://lh3.googleusercontent.com/pw/ACtC-3f_62JD9fB_bxTcLFJRGhsADlda4hjJjFkzsuDAx0SnMTGZNlX0kl1j4n3WMpjBcPP9BpNOYrIVsy80vqXwjhKSLP7hH_d01FqpdCjA_S9cCdrBXnqE14LndovknJXimWkPHVKo56bcaJgP0SpqDw3Vog=w1283-h571-no?authuser=0" title=cover><img src="https://lh3.googleusercontent.com/pw/ACtC-3f_62JD9fB_bxTcLFJRGhsADlda4hjJjFkzsuDAx0SnMTGZNlX0kl1j4n3WMpjBcPP9BpNOYrIVsy80vqXwjhKSLP7hH_d01FqpdCjA_S9cCdrBXnqE14LndovknJXimWkPHVKo56bcaJgP0SpqDw3Vog=w1283-h571-no?authuser=0" alt=cover title=cover></a></p><p>上一篇作者提到了兩套 <a href=https://www.pulumi.com/docs/get-started/install/>Infrastructure as Code</a> 工具，分別是 <a href=https://www.terraform.io/>Terraform</a> 跟 <a href=https://www.pulumi.com/>Pulumi</a>，大家對於前者可能會是比較熟悉，那本篇用一個實際案例『建立 AWS S3 並上傳靜態網站』來跟大家分享如何從無開始一步一步使用 Pulumi。本教學使用的程式碼都可以在 <a href=https://github.com/go-training/infrastructure-as-code-workshop/tree/main/pulumi/labs/lab01-modern-infrastructure-as-code>GitHub 上面瀏覽及下載</a>。教學會拆成七個章節:</p><ol><li>建立 Pulumi 新專案</li><li>設定 AWS 環境</li><li>初始化 Pulumi 架構 (建立 S3 Bucket)</li><li>更新 AWS 架構 (S3 Hosting)</li><li>設定 Pulumi Stack 環境變數 (<a href=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-02/>教學二</a>)</li><li>建立第二個 Pulumi Stack 環境 (<a href=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-02/>教學二</a>)</li><li>刪除 Pulumi Stack 環境 (<a href=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-02/>教學二</a>)</li></ol><h2 id=教學影片>教學影片</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/ujkXfPsU3Is style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><ul><li>00:00​ Pulumi 應用實作簡介</li><li>01:30​ 章節一: 用 Pulumi 建立新專案</li><li>02:39​ 用 Pulumi CLI 初始化專案</li><li>04:47​ 介紹 Pulumi 產生的 AWS Go 目錄結構內容</li><li>06:10​ 章節二: 設定 AWS 環境</li><li>08:36​ 章節三: 建立 AWS S3 Bucket</li><li>13:44​ 指定 S3 Bucket 名稱</li><li>16:09​ 章節四: 將 S3 Bucket 變成 Web Host</li><li>16:25​ 上傳 index.html 到 S3 Bucket 內</li><li>18:22​ 設定 S3 Bucket 為 Web Host 讀取 index.html</li><li>19:17​ 取得 AWS S3 的 Web URL</li><li>20:55​ 修改 S3 Object 的 Permission (ACL)</li><li>22:45​ 心得感想</li></ul><h2 id=用-pulumi-建立新專案>用 Pulumi 建立新專案</h2><h3 id=步驟一-安裝-pulumi-cli-工具>步驟一: 安裝 Pulumi CLI 工具</h3><p>首先你要在自己電腦安裝上 Pulumi CLI 工具，請參考<a href=https://www.pulumi.com/docs/get-started/install/>官方網站</a>，根據您的作業環境有不同的安裝方式，底下以 Mac 環境為主</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>brew install pulumi
</span></span></code></pre></td></tr></table></div></div><p>透過 brew 即可安裝成功，那升級工具透過底下即可</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>brew upgrade pulumi
</span></span></code></pre></td></tr></table></div></div><p>或者您沒有使用 brew，也可以透過 curl 安裝</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>curl -fsSL https://get.pulumi.com | sh
</span></span></code></pre></td></tr></table></div></div><p>測試 CLI 指令</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>$ pulumi version
</span></span><span style=display:flex><span>v2.20.0
</span></span></code></pre></td></tr></table></div></div><p>有看到版本資訊就是安裝成功了</p><h3 id=步驟二-初始化專案>步驟二: 初始化專案</h3><p>透過 <code>pulumi new -h</code> 可以看到說明</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-16>16</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  pulumi new [template|url] [flags]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -c, --config stringArray        Config to save
</span></span><span style=display:flex><span>      --config-path               Config keys contain a path to a property in a map or list to <span style=color:#658b00>set</span>
</span></span><span style=display:flex><span>  -d, --description string        The project description; <span style=color:#8b008b;font-weight:700>if</span> not specified, a prompt will request it
</span></span><span style=display:flex><span>      --dir string                The location to place the generated project; <span style=color:#8b008b;font-weight:700>if</span> not specified, the current directory is used
</span></span><span style=display:flex><span>  -f, --force                     Forces content to be generated even <span style=color:#8b008b;font-weight:700>if</span> it would change existing files
</span></span><span style=display:flex><span>  -g, --generate-only             Generate the project only; <span style=color:#8b008b;font-weight:700>do</span> not create a stack, save config, or install dependencies
</span></span><span style=display:flex><span>  -h, --help                      <span style=color:#658b00>help</span> <span style=color:#8b008b;font-weight:700>for</span> new
</span></span><span style=display:flex><span>  -n, --name string               The project name; <span style=color:#8b008b;font-weight:700>if</span> not specified, a prompt will request it
</span></span><span style=display:flex><span>  -o, --offline                   Use locally cached templates without making any network requests
</span></span><span style=display:flex><span>      --secrets-provider string   The <span style=color:#658b00>type</span> of the provider that should be used to encrypt and decrypt secrets (possible choices: default, passphrase, awskms, azurekeyvault, gcpkms, hashivault) (default <span style=color:#cd5555>&#34;default&#34;</span>)
</span></span><span style=display:flex><span>  -s, --stack string              The stack name; either an existing stack or stack to create; <span style=color:#8b008b;font-weight:700>if</span> not specified, a prompt will request it
</span></span><span style=display:flex><span>  -y, --yes                       Skip prompts and proceed with default values
</span></span></code></pre></td></tr></table></div></div><p>可以選擇的 Template 超多，那我們這次用 AWS 搭配 Go 語言的 Temaplate 當作範例</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-25>25</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>$ pulumi new aws-go --dir demo
</span></span><span style=display:flex><span>This <span style=color:#658b00>command</span> will walk you through creating a new Pulumi project.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Enter a value or leave blank to accept the (default), and press &lt;ENTER&gt;.
</span></span><span style=display:flex><span>Press ^C at any <span style=color:#658b00>time</span> to quit.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>project name: (demo)
</span></span><span style=display:flex><span>project description: (A minimal AWS Go Pulumi program)
</span></span><span style=display:flex><span>Created project <span style=color:#cd5555>&#39;demo&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please enter your desired stack name.
</span></span><span style=display:flex><span>To create a stack in an organization, use the format &lt;org-name&gt;/&lt;stack-name&gt; (e.g. <span style=color:#cd5555>`</span>acmecorp/dev<span style=color:#cd5555>`</span>).
</span></span><span style=display:flex><span>stack name: (dev)
</span></span><span style=display:flex><span>Created stack <span style=color:#cd5555>&#39;dev&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>aws:region: The AWS region to deploy into: (us-east-1) ap-northeast-1
</span></span><span style=display:flex><span>Saved config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Installing dependencies...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Finished installing dependencies
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your new project is ready to go! ✨
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>To perform an initial deployment, run <span style=color:#cd5555>&#39;cd demo&#39;</span>, <span style=color:#8b008b;font-weight:700>then</span>, run <span style=color:#cd5555>&#39;pulumi up&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟三-檢查專案目錄結構>步驟三: 檢查專案目錄結構</h3><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>└── demo
</span></span><span style=display:flex><span>    ├── Pulumi.dev.yaml
</span></span><span style=display:flex><span>    ├── Pulumi.yaml
</span></span><span style=display:flex><span>    ├── go.mod
</span></span><span style=display:flex><span>    ├── go.sum
</span></span><span style=display:flex><span>    └── main.go
</span></span></code></pre></td></tr></table></div></div><p>其中 <code>main.go</code> 就是主程式檔案</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b008b;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;github.com/pulumi/pulumi-aws/sdk/v3/go/aws/s3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;github.com/pulumi/pulumi/sdk/v2/go/pulumi&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>func</span> <span style=color:#008b45>main</span>() {
</span></span><span style=display:flex><span>    pulumi.<span style=color:#008b45>Run</span>(<span style=color:#8b008b;font-weight:700>func</span>(ctx *pulumi.Context) <span style=color:#00688b;font-weight:700>error</span> {
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Create an AWS resource (S3 Bucket)
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        bucket, err := s3.<span style=color:#008b45>NewBucket</span>(ctx, <span style=color:#cd5555>&#34;my-bucket&#34;</span>, <span style=color:#8b008b;font-weight:700>nil</span>)
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Export the name of the bucket
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketName&#34;</span>, bucket.<span style=color:#008b45>ID</span>())
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>return</span> <span style=color:#8b008b;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=設定-aws-環境>設定 AWS 環境</h2><p>在使用 Pulumi 之前要先把 AWS 環境建立好</p><h3 id=前置作業>前置作業</h3><p>請先將 AWS 環境設定完畢，請用 <code>aws configure</code> 完成 profile 設定</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>aws configure --profile demo
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟一-設定-aws-region>步驟一: 設定 AWS Region</h3><p>可以參考 <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions>AWS 官方的 Available Regions</a>，並且透過 Pulumi CLI 做調整</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#658b00>cd</span> demo &amp;&amp; pulumi config <span style=color:#658b00>set</span> aws:region ap-northeast-1
</span></span></code></pre></td></tr></table></div></div><p>切換到 demo 目錄，並執行 <code>pulumi config</code></p><h3 id=步驟二-設定-aws-profile>步驟二: 設定 AWS Profile</h3><p>如果你有很多環境需要設定，請使用 AWS Profile 作切換，不要用 default profile。其中 <code>demo</code> 為 profile 名稱</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>pulumi config <span style=color:#658b00>set</span> aws:profile demo
</span></span></code></pre></td></tr></table></div></div><h2 id=初始化-pulumi-架構-建立-s3-bucket>初始化 Pulumi 架構 (建立 S3 Bucket)</h2><h3 id=步驟一-建立新的-s3-bucket>步驟一: 建立新的 S3 Bucket</h3><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>        bucket, err := s3.<span style=color:#008b45>NewBucket</span>(ctx, <span style=color:#cd5555>&#34;my-bucket&#34;</span>, <span style=color:#8b008b;font-weight:700>nil</span>)
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟二-執行-pulumi-cli-預覽>步驟二: 執行 Pulumi CLI 預覽</h3><p>透過底下指令可以直接預覽每個操作步驟所做的改變:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>pulumi up
</span></span></code></pre></td></tr></table></div></div><p>可以看到底下預覽:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-15>15</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Previewing update (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/previews/db6a9e4e-f391-4cc4-b50c-408319b3d8e2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                 Name       Plan
</span></span><span style=display:flex><span> +   pulumi:pulumi:Stack  demo-dev   create
</span></span><span style=display:flex><span> +   └─ aws:s3:Bucket     my-bucket  create
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    + <span style=color:#b452cd>2</span> to create
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Do you want to perform this update?  [Use arrows to move, enter to <span style=color:#8b008b;font-weight:700>select</span>, <span style=color:#658b00>type</span> to filter]
</span></span><span style=display:flex><span>  yes
</span></span><span style=display:flex><span>&gt; no
</span></span><span style=display:flex><span>  details
</span></span></code></pre></td></tr></table></div></div><p>選擇最後的 details:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-6>6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-7>7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Do you want to perform this update? details
</span></span><span style=display:flex><span>+ pulumi:pulumi:Stack: (create)
</span></span><span style=display:flex><span>    [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::pulumi:pulumi:Stack::demo-dev]
</span></span><span style=display:flex><span>    + aws:s3/bucket:Bucket: (create)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucket:Bucket::my-bucket]
</span></span><span style=display:flex><span>        acl         : <span style=color:#cd5555>&#34;private&#34;</span>
</span></span><span style=display:flex><span>        bucket      : <span style=color:#cd5555>&#34;my-bucket-e3d8115&#34;</span>
</span></span><span style=display:flex><span>        forceDestroy: <span style=color:#658b00>false</span>
</span></span></code></pre></td></tr></table></div></div><p>可以看到更詳細的建立步驟及權限，在此步驟可以詳細知道 Pulumi 會怎麼設定 AWS 架構，透過此預覽方式避免人為操作失誤。</p><h3 id=步驟三-執行部署>步驟三: 執行部署</h3><p>看完上面的預覽，我們最後就直接執行:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-16>16</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Do you want to perform this update? yes
</span></span><span style=display:flex><span>Updating (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/updates/3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                 Name       Status
</span></span><span style=display:flex><span> +   pulumi:pulumi:Stack  demo-dev   created
</span></span><span style=display:flex><span> +   └─ aws:s3:Bucket     my-bucket  created
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Outputs:
</span></span><span style=display:flex><span>    bucketName: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    + <span style=color:#b452cd>2</span> created
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Duration: 17s
</span></span></code></pre></td></tr></table></div></div><p>透過上述 UI 也可以看到蠻多詳細的資訊</p><p><img src="https://i2.wp.com/i.imgur.com/MkY5BZC.png?w=840&ssl=1" alt data-recalc-dims=1><img src="https://i2.wp.com/i.imgur.com/jpVpjmm.png?w=840&ssl=1" alt data-recalc-dims=1></p><h3 id=步驟四-顯示更多-bucket-詳細資訊>步驟四: 顯示更多 Bucket 詳細資訊</h3><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-16-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-16-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-16-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-16-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-16-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-16-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>        <span style=color:#228b22>// Export the name of the bucket
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketID&#34;</span>, bucket.<span style=color:#008b45>ID</span>())
</span></span><span style=display:flex><span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketName&#34;</span>, bucket.Bucket)
</span></span></code></pre></td></tr></table></div></div><p>執行 <code>pulumi up</code></p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-15>15</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#008b45>Updating</span> (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https:<span style=color:#228b22>//app.pulumi.com/appleboy/demo/dev/updates/4
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>
</span></span><span style=display:flex><span>     Type                 Name      Status
</span></span><span style=display:flex><span>     pulumi:pulumi:Stack  demo-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Outputs:
</span></span><span style=display:flex><span>  + bucketID  : <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span>
</span></span><span style=display:flex><span>    bucketName: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    <span style=color:#b452cd>2</span> unchanged
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Duration: <span style=color:#b452cd>7</span>s
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟五-更新-bucket-名稱>步驟五: 更新 Bucket 名稱</h3><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-16>16</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b008b;font-weight:700>func</span> <span style=color:#008b45>main</span>() {
</span></span><span style=display:flex><span>    pulumi.<span style=color:#008b45>Run</span>(<span style=color:#8b008b;font-weight:700>func</span>(ctx *pulumi.Context) <span style=color:#00688b;font-weight:700>error</span> {
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Create an AWS resource (S3 Bucket)
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        bucket, err := s3.<span style=color:#008b45>NewBucket</span>(ctx, <span style=color:#cd5555>&#34;my-bucket&#34;</span>, &amp;s3.BucketArgs{
</span></span><span style=display:flex><span>            Bucket: pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;foobar-1234&#34;</span>),
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Export the name of the bucket
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketID&#34;</span>, bucket.<span style=color:#008b45>ID</span>())
</span></span><span style=display:flex><span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketName&#34;</span>, bucket.Bucket)
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>return</span> <span style=color:#8b008b;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>透過 <code>pulumi up</code></p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-25>25</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-26>26</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-27>27</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-28>28</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-29>29</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-30>30</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-31>31</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-32>32</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-33>33</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Previewing update (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/previews/7180c121-235c-40cc-9ae2-d0f68455296f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                 Name       Plan        Info
</span></span><span style=display:flex><span>     pulumi:pulumi:Stack  demo-dev
</span></span><span style=display:flex><span> +-  └─ aws:s3:Bucket     my-bucket  replace     [diff: ~bucket]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Outputs:
</span></span><span style=display:flex><span>  ~ bucketID  : <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; output&lt;string&gt;
</span></span><span style=display:flex><span>  ~ bucketName: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    +-1 to replace
</span></span><span style=display:flex><span>    <span style=color:#b452cd>1</span> unchanged
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Do you want to perform this update? details
</span></span><span style=display:flex><span>  pulumi:pulumi:Stack: (same)
</span></span><span style=display:flex><span>    [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::pulumi:pulumi:Stack::demo-dev]
</span></span><span style=display:flex><span>    --aws:s3/bucket:Bucket: (delete-replaced)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>id</span>=my-bucket-9dd3052]
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucket:Bucket::my-bucket]
</span></span><span style=display:flex><span>    +-aws:s3/bucket:Bucket: (replace)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>id</span>=my-bucket-9dd3052]
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucket:Bucket::my-bucket]
</span></span><span style=display:flex><span>      ~ bucket: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>    ++aws:s3/bucket:Bucket: (create-replacement)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>id</span>=my-bucket-9dd3052]
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucket:Bucket::my-bucket]
</span></span><span style=display:flex><span>      ~ bucket: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>    --outputs:--
</span></span><span style=display:flex><span>  ~ bucketID  : <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; output&lt;string&gt;
</span></span><span style=display:flex><span>  ~ bucketName: <span style=color:#cd5555>&#34;my-bucket-9dd3052&#34;</span> =&gt; <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>可以看到系統會砍掉舊的，在建立一個新的 bucket</p><h2 id=更新-aws-架構-s3-hosting>更新 AWS 架構 (S3 Hosting)</h2><p>上個步驟教大家如何建立 Infra 架構，那這單元教大家如何將使用 S3 當一個簡單的 Web Hosting。</p><ol><li>將 index.html 放入 S3 內</li><li>設定 S3 當作 Web Hosting</li><li>測試 S3 Hosting</li></ol><h3 id=步驟一-建立-indexhtml-放入-s3-內>步驟一: 建立 index.html 放入 S3 內</h3><p>建立 <code>content/index.html</code> 檔案，內容如下</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#8b008b;font-weight:700>html</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#8b008b;font-weight:700>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#8b008b;font-weight:700>h1</span>&gt;Hello Pulumi S3 Bucket&lt;/<span style=color:#8b008b;font-weight:700>h1</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#8b008b;font-weight:700>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#8b008b;font-weight:700>html</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>修改 <code>main.go</code>，將 <code>index.html</code> 加入到 S3 bucket 內</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-6>6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-7>7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-8>8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-9>9</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>        index := path.<span style=color:#008b45>Join</span>(<span style=color:#cd5555>&#34;content&#34;</span>, <span style=color:#cd5555>&#34;index.html&#34;</span>)
</span></span><span style=display:flex><span>        _, err = s3.<span style=color:#008b45>NewBucketObject</span>(ctx, <span style=color:#cd5555>&#34;index.html&#34;</span>, &amp;s3.BucketObjectArgs{
</span></span><span style=display:flex><span>            Bucket: bucket.Bucket,
</span></span><span style=display:flex><span>            Source: pulumi.<span style=color:#008b45>NewFileAsset</span>(index),
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span></code></pre></td></tr></table></div></div><p>其中目錄結構如下</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-6>6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-7>7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>├── demo
</span></span><span style=display:flex><span>│   ├── Pulumi.dev.yaml
</span></span><span style=display:flex><span>│   ├── Pulumi.yaml
</span></span><span style=display:flex><span>│   ├── content
</span></span><span style=display:flex><span>│   │   └── index.html
</span></span><span style=display:flex><span>│   ├── go.mod
</span></span><span style=display:flex><span>│   ├── go.sum
</span></span><span style=display:flex><span>│   └── main.go
</span></span></code></pre></td></tr></table></div></div><p>部署到 S3 Bucket 內</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-23>23</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>$ pulumi up
</span></span><span style=display:flex><span>Previewing update (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/previews/a0ac1b69-06b9-4109-800d-20618b36e5c8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                    Name        Plan
</span></span><span style=display:flex><span>     pulumi:pulumi:Stack     demo-dev
</span></span><span style=display:flex><span> +   └─ aws:s3:BucketObject  index.html  create
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    + <span style=color:#b452cd>1</span> to create
</span></span><span style=display:flex><span>    <span style=color:#b452cd>2</span> unchanged
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Do you want to perform this update? details
</span></span><span style=display:flex><span>  pulumi:pulumi:Stack: (same)
</span></span><span style=display:flex><span>    [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::pulumi:pulumi:Stack::demo-dev]
</span></span><span style=display:flex><span>    + aws:s3/bucketObject:BucketObject: (create)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucketObject:BucketObject::index.html]
</span></span><span style=display:flex><span>        acl         : <span style=color:#cd5555>&#34;private&#34;</span>
</span></span><span style=display:flex><span>        bucket      : <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>        forceDestroy: <span style=color:#658b00>false</span>
</span></span><span style=display:flex><span>        key         : <span style=color:#cd5555>&#34;index.html&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#658b00>source</span>      : asset(file:77aab46) { content/index.html }
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟二-設定-s3-為-web-hosting>步驟二: 設定 S3 為 Web Hosting</h3><p>修改 main.go</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-14>14</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>        bucket, err := s3.<span style=color:#008b45>NewBucket</span>(ctx, <span style=color:#cd5555>&#34;my-bucket&#34;</span>, &amp;s3.BucketArgs{
</span></span><span style=display:flex><span>            Bucket: pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;foobar-1234&#34;</span>),
</span></span><span style=display:flex><span>            Website: s3.BucketWebsiteArgs{
</span></span><span style=display:flex><span>                IndexDocument: pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;index.html&#34;</span>),
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        index := path.<span style=color:#008b45>Join</span>(<span style=color:#cd5555>&#34;content&#34;</span>, <span style=color:#cd5555>&#34;index.html&#34;</span>)
</span></span><span style=display:flex><span>        _, err = s3.<span style=color:#008b45>NewBucketObject</span>(ctx, <span style=color:#cd5555>&#34;index.html&#34;</span>, &amp;s3.BucketObjectArgs{
</span></span><span style=display:flex><span>            Bucket:      bucket.Bucket,
</span></span><span style=display:flex><span>            Source:      pulumi.<span style=color:#008b45>NewFileAsset</span>(index),
</span></span><span style=display:flex><span>            Acl:         pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;public-read&#34;</span>),
</span></span><span style=display:flex><span>            ContentType: pulumi.<span style=color:#008b45>String</span>(mime.<span style=color:#008b45>TypeByExtension</span>(path.<span style=color:#008b45>Ext</span>(index))),
</span></span><span style=display:flex><span>        })
</span></span></code></pre></td></tr></table></div></div><p>最後設定輸出 URL:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-25-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-25-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketEndpoint&#34;</span>, bucket.WebsiteEndpoint)
</span></span></code></pre></td></tr></table></div></div><p>最後完整程式碼如下:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-25>25</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-26>26</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-27>27</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-28>28</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-29>29</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-30>30</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-31>31</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-32>32</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-33>33</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-34>34</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-35>35</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-36>36</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-37>37</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-38>38</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-39>39</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-40>40</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-41>41</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-42>42</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-43>43</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8b008b;font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;mime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;path&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;github.com/pulumi/pulumi-aws/sdk/v3/go/aws/s3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#cd5555>&#34;github.com/pulumi/pulumi/sdk/v2/go/pulumi&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b008b;font-weight:700>func</span> <span style=color:#008b45>main</span>() {
</span></span><span style=display:flex><span>    pulumi.<span style=color:#008b45>Run</span>(<span style=color:#8b008b;font-weight:700>func</span>(ctx *pulumi.Context) <span style=color:#00688b;font-weight:700>error</span> {
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Create an AWS resource (S3 Bucket)
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        bucket, err := s3.<span style=color:#008b45>NewBucket</span>(ctx, <span style=color:#cd5555>&#34;my-bucket&#34;</span>, &amp;s3.BucketArgs{
</span></span><span style=display:flex><span>            Bucket: pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;foobar-1234&#34;</span>),
</span></span><span style=display:flex><span>            Website: s3.BucketWebsiteArgs{
</span></span><span style=display:flex><span>                IndexDocument: pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;index.html&#34;</span>),
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        index := path.<span style=color:#008b45>Join</span>(<span style=color:#cd5555>&#34;content&#34;</span>, <span style=color:#cd5555>&#34;index.html&#34;</span>)
</span></span><span style=display:flex><span>        _, err = s3.<span style=color:#008b45>NewBucketObject</span>(ctx, <span style=color:#cd5555>&#34;index.html&#34;</span>, &amp;s3.BucketObjectArgs{
</span></span><span style=display:flex><span>            Bucket:      bucket.Bucket,
</span></span><span style=display:flex><span>            Source:      pulumi.<span style=color:#008b45>NewFileAsset</span>(index),
</span></span><span style=display:flex><span>            Acl:         pulumi.<span style=color:#008b45>String</span>(<span style=color:#cd5555>&#34;public-read&#34;</span>),
</span></span><span style=display:flex><span>            ContentType: pulumi.<span style=color:#008b45>String</span>(mime.<span style=color:#008b45>TypeByExtension</span>(path.<span style=color:#008b45>Ext</span>(index))),
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>if</span> err != <span style=color:#8b008b;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#8b008b;font-weight:700>return</span> err
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#228b22>// Export the name of the bucket
</span></span></span><span style=display:flex><span><span style=color:#228b22></span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketID&#34;</span>, bucket.<span style=color:#008b45>ID</span>())
</span></span><span style=display:flex><span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketName&#34;</span>, bucket.Bucket)
</span></span><span style=display:flex><span>        ctx.<span style=color:#008b45>Export</span>(<span style=color:#cd5555>&#34;bucketEndpoint&#34;</span>, bucket.WebsiteEndpoint)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b008b;font-weight:700>return</span> <span style=color:#8b008b;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>執行 pulumi up</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-25>25</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-26>26</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-27>27</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-28>28</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-29>29</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-30>30</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-31>31</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-32>32</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-33>33</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-34>34</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-35>35</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-36>36</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-37>37</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-38>38</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-39>39</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-40>40</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-41>41</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-42>42</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-43>43</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-44>44</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-45>45</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-46>46</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-47>47</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-48>48</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-49>49</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-50>50</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-51>51</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-52>52</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>Previewing update (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/previews/edbaefca-f723-4ac5-aabd-7cb638636612
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                    Name        Plan       Info
</span></span><span style=display:flex><span>     pulumi:pulumi:Stack     demo-dev
</span></span><span style=display:flex><span> ~   ├─ aws:s3:Bucket        my-bucket   update     [diff: +website]
</span></span><span style=display:flex><span> ~   └─ aws:s3:BucketObject  index.html  update     [diff: ~acl,contentType]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Outputs:
</span></span><span style=display:flex><span>  + bucketEndpoint: output&lt;string&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    ~ <span style=color:#b452cd>2</span> to update
</span></span><span style=display:flex><span>    <span style=color:#b452cd>1</span> unchanged
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Do you want to perform this update? details
</span></span><span style=display:flex><span>  pulumi:pulumi:Stack: (same)
</span></span><span style=display:flex><span>    [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::pulumi:pulumi:Stack::demo-dev]
</span></span><span style=display:flex><span>    ~ aws:s3/bucket:Bucket: (update)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>id</span>=foobar-1234]
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucket:Bucket::my-bucket]
</span></span><span style=display:flex><span>      + website: {
</span></span><span style=display:flex><span>          + indexDocument: <span style=color:#cd5555>&#34;index.html&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    --outputs:--
</span></span><span style=display:flex><span>  + bucketEndpoint: output&lt;string&gt;
</span></span><span style=display:flex><span>    ~ aws:s3/bucketObject:BucketObject: (update)
</span></span><span style=display:flex><span>        [<span style=color:#00688b>id</span>=index.html]
</span></span><span style=display:flex><span>        [<span style=color:#00688b>urn</span>=urn:pulumi:dev::demo::aws:s3/bucketObject:BucketObject::index.html]
</span></span><span style=display:flex><span>      ~ acl        : <span style=color:#cd5555>&#34;private&#34;</span> =&gt; <span style=color:#cd5555>&#34;public-read&#34;</span>
</span></span><span style=display:flex><span>      ~ contentType: <span style=color:#cd5555>&#34;binary/octet-stream&#34;</span> =&gt; <span style=color:#cd5555>&#34;text/html; charset=utf-8&#34;</span>
</span></span><span style=display:flex><span>Do you want to perform this update? yes
</span></span><span style=display:flex><span>Updating (dev)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Live: https://app.pulumi.com/appleboy/demo/dev/updates/7
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     Type                    Name        Status      Info
</span></span><span style=display:flex><span>     pulumi:pulumi:Stack     demo-dev
</span></span><span style=display:flex><span> ~   ├─ aws:s3:Bucket        my-bucket   updated     [diff: +website]
</span></span><span style=display:flex><span> ~   └─ aws:s3:BucketObject  index.html  updated     [diff: ~acl,contentType]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Outputs:
</span></span><span style=display:flex><span>  + bucketEndpoint: <span style=color:#cd5555>&#34;foobar-1234.s3-website-ap-northeast-1.amazonaws.com&#34;</span>
</span></span><span style=display:flex><span>    bucketID      : <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>    bucketName    : <span style=color:#cd5555>&#34;foobar-1234&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Resources:
</span></span><span style=display:flex><span>    ~ <span style=color:#b452cd>2</span> updated
</span></span><span style=display:flex><span>    <span style=color:#b452cd>1</span> unchanged
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Duration: 13s
</span></span></code></pre></td></tr></table></div></div><h3 id=步驟三-測試-url>步驟三: 測試 URL</h3><p>透過底下指令可以拿到 S3 的 URL:</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>pulumi stack output bucketEndpoint
</span></span></code></pre></td></tr></table></div></div><p>透過 CURL 指令測試看看</p><div class=highlight><div style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-1> 1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-2> 2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-3> 3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-4> 4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-5> 5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-6> 6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-7> 7</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-8> 8</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-9> 9</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-10>10</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-11>11</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-12>12</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-13>13</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-14>14</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-15>15</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-16>16</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-17>17</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-18>18</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-19>19</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-20>20</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-21>21</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-22>22</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-23>23</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-24>24</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-25>25</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span>$ curl -v <span style=color:#8b008b;font-weight:700>$(</span>pulumi stack output bucketEndpoint<span style=color:#8b008b;font-weight:700>)</span>
</span></span><span style=display:flex><span>*   Trying 52.219.16.96...
</span></span><span style=display:flex><span>* TCP_NODELAY <span style=color:#658b00>set</span>
</span></span><span style=display:flex><span>* Connected to foobar-1234.s3-website-ap-northeast-1.amazonaws.com (52.219.16.96) port <span style=color:#b452cd>80</span> (<span style=color:#228b22>#0)</span>
</span></span><span style=display:flex><span>&gt; GET / HTTP/1.1
</span></span><span style=display:flex><span>&gt; Host: foobar-1234.s3-website-ap-northeast-1.amazonaws.com
</span></span><span style=display:flex><span>&gt; User-Agent: curl/7.64.1
</span></span><span style=display:flex><span>&gt; Accept: */*
</span></span><span style=display:flex><span>&gt;
</span></span><span style=display:flex><span>&lt; HTTP/1.1 <span style=color:#b452cd>200</span> OK
</span></span><span style=display:flex><span>&lt; x-amz-id-2: 0NrZfFxZNOs+toz0/86FiASG+MyQE6f+KbKNi4wzcDtmn5mTnQoxupVybR464X8Oi6HDMjSU+i8=
</span></span><span style=display:flex><span>&lt; x-amz-request-id: A55BD2534EDC94A9
</span></span><span style=display:flex><span>&lt; Date: Thu, <span style=color:#b452cd>11</span> Feb <span style=color:#b452cd>2021</span> 03:30:42 GMT
</span></span><span style=display:flex><span>&lt; Last-Modified: Thu, <span style=color:#b452cd>11</span> Feb <span style=color:#b452cd>2021</span> 03:29:14 GMT
</span></span><span style=display:flex><span>&lt; ETag: <span style=color:#cd5555>&#34;46e94ba24774d0c4a768f9461e6b9806&#34;</span>
</span></span><span style=display:flex><span>&lt; Content-Type: text/html; <span style=color:#00688b>charset</span>=utf-8
</span></span><span style=display:flex><span>&lt; Content-Length: <span style=color:#b452cd>70</span>
</span></span><span style=display:flex><span>&lt; Server: AmazonS3
</span></span><span style=display:flex><span>&lt;
</span></span><span style=display:flex><span>&lt;html&gt;
</span></span><span style=display:flex><span>  &lt;body&gt;
</span></span><span style=display:flex><span>    &lt;h1&gt;Hello Pulumi S3 Bucket&lt;/h1&gt;
</span></span><span style=display:flex><span>  &lt;/body&gt;
</span></span><span style=display:flex><span>&lt;/html&gt;
</span></span><span style=display:flex><span>* Connection <span style=color:#228b22>#0 to host foobar-1234.s3-website-ap-northeast-1.amazonaws.com left intact</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=心得>心得</h2><p>上述已經可以將靜態網站放在 AWS S3 上面了，<a href=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-02/>下一篇</a>會教大家底下三個章節</p><ol><li>設定 Pulumi Stack 環境變數</li><li>建立第二個 Pulumi Stack 環境</li><li>刪除 Pulumi Stack 環境</li></ol><div class=blog-tags><a href=https://blog.wu-boy.com/tags/golang/>golang</a>&nbsp;
<a href=https://blog.wu-boy.com/tags/pulumi/>pulumi</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f&text=%e5%88%9d%e6%8e%a2%20Pulumi%20%e4%b8%8a%e5%82%b3%e9%9d%9c%e6%85%8b%e7%b6%b2%e7%ab%99%e5%88%b0%20AWS%20S3%20%28%e4%b8%80%29&via=appleboy" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f&title=%e5%88%9d%e6%8e%a2%20Pulumi%20%e4%b8%8a%e5%82%b3%e9%9d%9c%e6%85%8b%e7%b6%b2%e7%ab%99%e5%88%b0%20AWS%20S3%20%28%e4%b8%80%29" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f&title=%e5%88%9d%e6%8e%a2%20Pulumi%20%e4%b8%8a%e5%82%b3%e9%9d%9c%e6%85%8b%e7%b6%b2%e7%ab%99%e5%88%b0%20AWS%20S3%20%28%e4%b8%80%29" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f&title=%e5%88%9d%e6%8e%a2%20Pulumi%20%e4%b8%8a%e5%82%b3%e9%9d%9c%e6%85%8b%e7%b6%b2%e7%ab%99%e5%88%b0%20AWS%20S3%20%28%e4%b8%80%29" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fblog.wu-boy.com%2f2021%2f02%2fupload-static-content-to-aws-s3-using-pulumi-01%2f&description=%e5%88%9d%e6%8e%a2%20Pulumi%20%e4%b8%8a%e5%82%b3%e9%9d%9c%e6%85%8b%e7%b6%b2%e7%ab%99%e5%88%b0%20AWS%20S3%20%28%e4%b8%80%29" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section><h4 class=see-also>See also</h4><ul><li><a href=/2022/06/reuse-the-bytes-buffer-in-go/>在 Go 語言內使用 bytes.Buffer 注意事項</a></li><li><a href=/2022/05/read-data-from-channel-in-go/>用 10 分鐘了解 Go 語言如何從 Channel 讀取資料</a></li><li><a href=/2022/04/simple-publish-subscribe-pattern-in-golang/>用 Go 語言實現 Pub-Sub 模式</a></li><li><a href=/2022/04/new-package-graceful-shutdown-in-golang/>Go 語言實作 Graceful Shutdown 套件</a></li><li><a href=/2022/04/grant-access-to-user-specific-folders-in-amazone-s3-bucket/>使用 AWS IAM Policy 設定 S3 Bucket 底下特定目錄權限</a></li><li><a href=/2022/03/automated-service-health-dashboard-gatus/>推薦自動化監控網站運行服務 - Gatus</a></li><li><a href=/2022/02/pyroscope-adhoc-profiling-in-golang/>使用 pyroscope adhoc 加速找到效能瓶頸</a></li><li><a href=/2022/02/golang-1-18-generics-constraints-slices-maps/>Go 1.18 generics 新套件 constraints, slices 及 maps</a></li><li><a href=/2022/02/introduction-to-golang-1-18-generics/>初探 golang 1.18 generics 功能</a></li><li><a href=/2021/11/introduction-to-infra-structure-as-code-pulumi-vs-terraform/>infrastructure as code 優勢及工具選擇</a></li></ul></article><ul class="pager blog-pager"><li class=previous><a href=https://blog.wu-boy.com/2021/02/introduction-to-infrastructure-as-code-terraform-vs-pulumi/ data-toggle=tooltip data-placement=top title="初探 Infrastructure as Code 工具 Terraform vs Pulumi">&larr; Previous Post</a></li><li class=next><a href=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-02/ data-toggle=tooltip data-placement=top title="初探 Pulumi 上傳靜態網站到 AWS S3 (二)">Next Post &rarr;</a></li></ul><div class=disqus-comments><button id=show-comments class="btn btn-default" type=button>Show <span class=disqus-comment-count data-disqus-url=https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-01>comments</span></button><div id=disqus_thread></div><script type=text/javascript>var disqus_config=function(){this.page.url='https://blog.wu-boy.com/2021/02/upload-static-content-to-aws-s3-using-pulumi-01'}</script></div></div></div></div><footer class=post-footer><div class=container><div class=row><div class="col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:appleboy.tw@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/appleboy46 title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/appleboy title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/appleboy title=GitLab><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://bitbucket.org/appleboy title=Bitbucket><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/appleboy title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/appleboy title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/channel/UCLCZJ9d_I7UJP2bpXpge8KA title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://blog.wu-boy.com>Appleboy</a>
&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://blog.wu-boy.com>小惡魔 - AppleBOY</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.100.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://blog.wu-boy.com/js/main.js></script>
<script>(function(){var t,n='003841896160749976666:l9i5hqttpqi',e=document.createElement('script');e.type='text/javascript',e.async=!0,e.src='https://cse.google.com/cse.js?cx='+n,t=document.getElementsByTagName('script')[0],t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>$(function(){$('#show-comments').on('click',function(){var e='appleboy48';(function(){var t=document.createElement('script');t.type='text/javascript',t.async=!0,t.src='//'+e+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//appleboy48.disqus.com/count.js async></script><div class=back-to-top id=back-to-top><i class="fas fa-angle-double-up"></i></div></body></html>