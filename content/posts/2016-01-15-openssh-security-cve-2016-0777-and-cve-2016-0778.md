---
title: OpenSSH 安全性漏洞 CVE-2016-0777 and CVE-2016-0778
author: appleboy
type: post
date: 2016-01-15T01:26:56+00:00
url: /2016/01/openssh-security-cve-2016-0777-and-cve-2016-0778/
dsq_thread_id:
  - 4492257130
categories:
  - Debian
  - FreeBSD
  - Linux
  - Mac
  - Network
  - Ubuntu
tags:
  - FreeBSD
  - Linux
  - Mac
  - MacOS
  - OpenSSH
  - SSH
  - Ubuntu

---
<a data-flickr-embed="true"  href="https://www.flickr.com/photos/appleboy/23758702793/in/dateposted-public/" title="openssh"><img src="https://i0.wp.com/farm2.staticflickr.com/1616/23758702793_abebfb7167_o.gif?resize=578%2C191&#038;ssl=1" alt="openssh" data-recalc-dims="1" /></a>

[OpenSSH][1] 今日公佈 Client Bug 漏洞 [CVE-2016-0777 and CVE-2016-0778][2]，發生原因是 SSH Clinet 跟 Server 溝通時，新功能 `roaming` 造成傳輸過程被惡意程式破解，影響的 OpenSSH 版本為 5.4 - 7.1. 大家快看看自己是否為這版本區間。此問題會發生在 SSH Client 而不是 Server 端，所以 Linux [FreeBSD][3] 和 [MacOS][4] 都需要升級 OpenSSH，如果你是在 Windows 用 Putty 則不受影響。

<!--more-->

### 修補漏洞

請升級您的 OpenSSH 版本，或者是透過底下方式先暫時修補，On Linux and FreeBSD

<div>
  <pre class="brush: bash; title: ; notranslate" title="">echo 'UseRoaming no' | sudo tee -a /etc/ssh/ssh_config</pre>
</div>

如果使用 MacOS 請改用底下指令

<div>
  <pre class="brush: bash; title: ; notranslate" title="">echo "UseRoaming no" >> ~/.ssh/config</pre>
</div>

最重要的步驟是，請重新產生您的 Key Pairs

<div>
  <pre class="brush: bash; title: ; notranslate" title="">
# 產生 key
$ ssh-keygen -t rsa
$ ssh-copy-id user@123.45.56.78
# 或者是
$ cat ~/.ssh/id_rsa.pub | ssh user@123.45.56.78 "mkdir -p ~/.ssh && cat >>  ~/.ssh/authorized_keys"</pre>
</div>

延伸閱讀: [OpenSSH Client Bug CVE-2016-0777 and CVE-2016-0778][5]

 [1]: http://www.openssh.com/
 [2]: http://undeadly.org/cgi?action=article&sid=20160114142733
 [3]: https://www.freebsd.org/
 [4]: https://zh.wikipedia.org/zh-tw/Mac_OS
 [5]: https://www.digitalocean.com/community/questions/openssh-client-bug-cve-2016-0777-and-cve-2016-0778