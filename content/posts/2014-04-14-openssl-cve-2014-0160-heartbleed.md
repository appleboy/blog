---
title: OpenSSL CVE-2014-0160 (Heartbleed) 漏洞攻擊手法
author: appleboy
type: post
date: 2014-04-14T06:24:07+00:00
url: /2014/04/openssl-cve-2014-0160-heartbleed/
dsq_thread_id:
  - 2609983724
categories:
  - Debian
  - Linux
tags:
  - DEVCORE
  - Heartbleed
  - OpenSSL

---
<div style="margin:0 auto; text-align:center">
  <a href="https://www.flickr.com/photos/appleboy/13774392623" title="heartbleed by Bo-Yi Wu, on Flickr"><img src="https://i1.wp.com/farm8.staticflickr.com/7102/13774392623_7baaa68597_m.jpg?resize=198%2C240&#038;ssl=1" alt="heartbleed" data-recalc-dims="1" /></a>
</div>

[DEVCORE][1] 資安公司寫了一篇 [OpenSSL Heartbleed 全球駭客的殺戮祭典，你參與了嗎？][2] 內如介紹如何透過工具攻擊及測試現有網站，也提供如何修正 OpenSSL 漏洞，Debian，Centos，FreeBSD 等。要檢查機器是否更新到正確版本，可以透過底下指令

<div>
  <pre class="brush: bash; title: ; notranslate" title="">$ openssl version -a</pre>
</div>

<!--more-->

如果看到底下結果

<div>
  <pre class="brush: bash; title: ; notranslate" title="">OpenSSL 1.0.1e-fips 11 Feb 2013
built on: Tue Apr  8 02:39:29 UTC 2014
platform: linux-x86_64
options:  bn(64,64) md2(int) rc4(16x,int) des(idx,cisc,16,int) idea(int) blowfish(idx)
compiler: gcc -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -DKRB5_MIT -m64 -DL_ENDIAN -DTERMIO -Wall -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wa,--noexecstack -DPURIFY -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM
OPENSSLDIR: "/etc/pki/tls"
engines:  dynamic</pre>
</div>

更新時間為 4/7 號以後代表已經修正。透過 [Heartbleed test page][3] 可以查詢測試網站是否修正 [Heartbleed][4]，最後請記得重新產生 certificate signing request (CSR)。

<div>
  <pre class="brush: bash; title: ; notranslate" title="">$ openssl req -new -nodes -days 365 -keyout www.mydomain.com.key -out www.mydomain.com.csr</pre>
</div>

底下是 DEVCORE 錄製的攻擊手法 Demo 影片

 [1]: http://devco.re/
 [2]: http://devco.re/blog/2014/04/11/openssl-heartbleed-how-to-hack-how-to-protect/
 [3]: https://filippo.io/Heartbleed/
 [4]: http://heartbleed.com/